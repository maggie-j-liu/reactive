!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).reactive=e()}(this,(function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,s;function u(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t){return null==t?"":t}function h(t,e){t.appendChild(e)}function f(t,e,n){const r=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e.host)return e;return document}(t);if(!r.getElementById(e)){const t=v("style");t.id=e,t.textContent=n,function(t,e){h(t.head||t,e)}(r,t)}}function p(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function y(){return g(" ")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e){t.value=null==e?"":e}function k(t){s=t}function C(t){(function(){if(!s)throw new Error("Function called outside component initialization");return s})().$$.on_mount.push(t)}const T=[],E=[],S=[],N=[],x=Promise.resolve();let A=!1;function P(t){S.push(t)}let O=!1;const R=new Set;function D(){if(!O){O=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];k(e),q(e.$$)}for(k(null),T.length=0;E.length;)E.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];R.has(e)||(R.add(e),e())}S.length=0}while(T.length);for(;N.length;)N.pop()();A=!1,O=!1,R.clear()}}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const L=new Set;let M;function j(t,e){t&&t.i&&(L.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),M.c.push((()=>{L.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function U(t,e){t.d(1),e.delete(t.key)}function V(t,e,n,r,i,o,a,s,u,l,c,h){let f=t.length,p=o.length,d=f;const v={};for(;d--;)v[t[d].key]=d;const m=[],g=new Map,y=new Map;for(d=p;d--;){const t=h(i,o,d),s=n(t);let u=a.get(s);u?r&&u.p(t,e):(u=l(s,t),u.c()),g.set(s,m[d]=u),s in v&&y.set(s,Math.abs(d-v[s]))}const w=new Set,b=new Set;function _(t){j(t,1),t.m(s,c),a.set(t.key,t),c=t.first,p--}for(;f&&p;){const e=m[p-1],n=t[f-1],r=e.key,i=n.key;e===n?(c=e.first,f--,p--):g.has(i)?!a.has(r)||w.has(r)?_(e):b.has(i)?f--:y.get(r)>y.get(i)?(b.add(r),_(e)):(w.add(i),f--):(u(n,a),f--)}for(;f--;){const e=t[f];g.has(e.key)||u(e,a)}for(;p;)_(m[p-1]);return m}function z(t){t&&t.c()}function W(t,n,o,a){const{fragment:s,on_mount:u,on_destroy:l,after_update:c}=t.$$;s&&s.m(n,o),a||P((()=>{const n=u.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(P)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(T.push(t),A||(A=!0,x.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function $(e,i,o,a,u,l,c,h=[-1]){const f=s;k(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:i.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:i.target||f.$$.root};c&&c(p.root);let v=!1;if(p.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&u(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),v&&H(e,t)),n})):[],p.update(),v=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();i.intro&&j(e.$$.fragment),W(e,i.target,i.anchor,i.customElement),D()}k(f)}class K{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var G=function(t,e){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var J=function(){return(J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Q(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function X(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Z(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function et(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nt=!1,rt="${JSCORE_VERSION}",it=function(t,e){if(!t)throw ot(e)},ot=function(t){return new Error("Firebase Database ("+rt+") INTERNAL ASSERT FAILED: "+t)},at=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},st={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,p=63&l;u||(p=64,a||(f=64)),r.push(n[c],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(at(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ut=function(t){try{return st.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function lt(t){return ct(void 0,t)}function ct(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ct(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ht=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ft(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function pt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function dt(){return!0===nt}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,mt.prototype.create),o}return Y(e,t),e}(Error),mt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?gt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new vt(i,s,r);return u},t}();function gt(t,e){return t.replace(yt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var yt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wt(t){return JSON.parse(t)}function bt(t){return JSON.stringify(t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _t=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=wt(ut(o[0])||""),n=wt(ut(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function It(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kt(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Ct(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tt(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Et=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function St(t,e){var n=new Nt(t,e);return n.subscribe.bind(n)}var Nt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function xt(){}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var At=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Pt(t,e){return t+" failed: "+e+" argument "}function Ot(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Pt(t,e)+"must be a valid function.")}function Rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Pt(t,e)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function qt(t){return t&&t._delegate?t._delegate:t}var Lt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Mt="[DEFAULT]",jt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ht;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:Mt})}catch(t){}try{for(var r=Z(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=tt(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:u});s.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Mt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Q(this,void 0,void 0,(function(){var t;return X(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(et(et([],tt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),tt(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Mt),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=Z(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var l=tt(u.value,2),c=l[0],h=l[1];o===this.normalizeInstanceIdentifier(c)&&h.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Z(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===Mt?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=Mt),this.component?this.component.multipleInstances?t:Mt:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ft,Ut=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new jt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Vt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zt,Wt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(zt||(zt={}));var Bt,Ht={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},$t=zt.INFO,Kt=((Ft={})[zt.DEBUG]="log",Ft[zt.VERBOSE]="log",Ft[zt.INFO]="info",Ft[zt.WARN]="warn",Ft[zt.ERROR]="error",Ft),Gt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Kt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Vt(["["+i+"]  "+t.name+":"],n))}},Yt=function(){function t(t){this.name=t,this._logLevel=$t,this._logHandler=Gt,this._userLogHandler=null,Wt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in zt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ht[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Vt([this,zt.DEBUG],t)),this._logHandler.apply(this,Vt([this,zt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Vt([this,zt.VERBOSE],t)),this._logHandler.apply(this,Vt([this,zt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Vt([this,zt.INFO],t)),this._logHandler.apply(this,Vt([this,zt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Vt([this,zt.WARN],t)),this._logHandler.apply(this,Vt([this,zt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Vt([this,zt.ERROR],t)),this._logHandler.apply(this,Vt([this,zt.ERROR],t))},t}();function Jt(t){Wt.forEach((function(e){e.setLogLevel(t)}))}var Qt,Xt=((Bt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Bt["bad-app-name"]="Illegal App name: '{$appName}",Bt["duplicate-app"]="Firebase App named '{$appName}' already exists",Bt["app-deleted"]="Firebase App named '{$appName}' already deleted",Bt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Bt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Bt),Zt=new mt("app","Firebase",Xt),te="@firebase/app",ee="[DEFAULT]",ne=((Qt={})[te]="fire-core",Qt["@firebase/analytics"]="fire-analytics",Qt["@firebase/app-check"]="fire-app-check",Qt["@firebase/auth"]="fire-auth",Qt["@firebase/database"]="fire-rtdb",Qt["@firebase/functions"]="fire-fn",Qt["@firebase/installations"]="fire-iid",Qt["@firebase/messaging"]="fire-fcm",Qt["@firebase/performance"]="fire-perf",Qt["@firebase/remote-config"]="fire-rc",Qt["@firebase/storage"]="fire-gcs",Qt["@firebase/firestore"]="fire-fst",Qt["fire-js"]="fire-js",Qt["firebase-wrapper"]="fire-js-all",Qt),re=new Yt("@firebase/app"),ie=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=lt(t),this.container=new Ut(e.name),this._addComponent(new Lt("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=ee),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ee),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){re.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Zt.create("app-deleted",{appName:this.name_})},t}();ie.prototype.name&&ie.prototype.options||ie.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function oe(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=ee);var a=o.name;if("string"!=typeof a||!a)throw Zt.create("bad-app-name",{appName:String(a)});if(It(e,a))throw Zt.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ne[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void re.warn(u.join(" "))}o(new Lt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Jt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Zt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ht[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:zt[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=Wt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!It(e,t=t||ee))throw Zt.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return re.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Zt.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&ct(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,l=Object.keys(e);u<l.length;u++){var c=l[u];e[c]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ae=function t(){var e=oe(ie);return e.INTERNAL=J(J({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ct(e,t)},createSubscribe:St,ErrorFactory:mt,deepExtend:ct}),e}(),se=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ue=self.firebase.SDK_VERSION;ue&&ue.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var le=ae.initializeApp;ae.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pt()&&re.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),le.apply(void 0,t)};var ce=ae;!function(t,e){t.INTERNAL.registerComponent(new Lt("platform-logger",(function(t){return new se(t)}),"PRIVATE")),t.registerVersion(te,"0.6.29",e),t.registerVersion("fire-js","")}(ce);var he="8.9.0";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
ce.registerVersion("firebase",he,"app"),ce.SDK_VERSION=he,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function c(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function k(t,e,n){this.code=E+t,this.message=e||S[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new k(e.substring(E.length),t.message,t.serverResponse):null}_(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var T,E="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function A(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function R(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function q(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}T=x("__EID__")?"__EID__":void 0,_(P,Error),P.prototype.name="CustomError",_(O,P),O.prototype.name="AssertionError",D.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var M=new D((function(){return new F}),(function(t){t.reset()}));function j(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=U(t,e)}function $(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function G(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var st=a.navigator;if(st){var ut=st.userAgent;if(ut){J=ut;break t}}J=""}function lt(t){return ot(J,t)}function ct(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===bt&&e||"",this.b=wt}function gt(t){return t instanceof mt&&t.constructor===mt&&t.b===wt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.ta=!0,mt.prototype.sa=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,wt={},bt={};function _t(){if(void 0===yt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){a.console&&a.console.error(t.message)}yt=t}else yt=t}return yt}function It(t,e){this.a=e===St?t:""}function kt(t){return t instanceof It&&t.constructor===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=gt(t);if(!Et.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=_t();return new It(t=e?e.createScriptURL(t):t,St)}(t=n.replace(Tt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?gt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Tt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Nt(t,e){this.a=e===qt?t:""}function xt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Ot.test(t))t=new Nt(t,qt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&At.test(e[1])?new Nt(t,qt):null}return t}function Dt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Nt(t,qt))}var qt={},Lt=new Nt("about:invalid#zClosurez",qt);function Mt(t,e,n){this.a=n===jt?t:""}Mt.prototype.ta=!0,Mt.prototype.sa=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Ft(t,e,n,r){return t=t instanceof Nt?t:Dt(t),e=e||a,n=n instanceof mt?gt(n):n||"",e.open(xt(t),n,r,void 0)}function Ut(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=c;var Wt,Bt,Ht=lt("Opera"),$t=lt("Trident")||lt("MSIE"),Kt=lt("Edge"),Gt=Kt||$t,Yt=lt("Gecko")&&!(ot(J.toLowerCase(),"webkit")&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),Jt=ot(J.toLowerCase(),"webkit")&&!lt("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}t:{var Xt="",Zt=(Bt=J,Yt?/rv:([^\);]+)(\)|;)/.exec(Bt):Kt?/Edge\/([\d\.]+)/.exec(Bt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bt):Jt?/WebKit\/(\S+)/.exec(Bt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Bt):void 0);if(Zt&&(Xt=Zt?Zt[1]:""),$t){var te=Qt();if(null!=te&&te>parseFloat(Xt)){Wt=String(te);break t}}Wt=Xt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Q(String(Wt)).split("."),r=Q(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=at(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||at(0==a[2].length,0==s[2].length)||at(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&$t){var ie=Qt();ee=ie||(parseInt(Wt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Bt){}var ae=!$t||9<=Number(oe);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}V(a?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){a.setTimeout((function(){throw t}),0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(we)}}else he=function(){var t=we;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!lt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!lt("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!lt("Trident")&&!lt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ge||(he(),ge=!0),ye.add(t,e)}var ge=!1,ye=new L;function we(){for(var t;t=j();){try{t.a.call(t.b)}catch(t){ve(t)}q(M,t)}ge=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=c)try{var n=this;t.call(e,(function(t){De(n,Ie,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}De(n,ke,t)}))}catch(t){De(this,ke,t)}}var _e=0,Ie=2,ke=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new D((function(){return new Ce}),(function(t){t.reset()}));function Ee(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof be)return t;var e=new be(c);return De(e,Ie,t),e}function Ne(t){return new be((function(e,n){n(t)}))}function xe(t,e,n){qe(t,e,n,null)||me(b(e,t))}function Ae(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),je(n,i,ke,e)))}t.c=null}else De(t,ke,e)}function Oe(t,e){t.b||t.a!=Ie&&t.a!=ke||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ee(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Oe(t,i),i.a}function De(t,e,n){t.a==_e&&(t===n&&(e=ke,n=new TypeError("Promise cannot resolve to itself")),t.a=1,qe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=ke||n instanceof Ve||function(t,e){t.g=!0,me((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function qe(t,e,n,r){if(t instanceof be)return Oe(t,Ee(e||c,n||null,r)),!0;if(A(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,me(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==ke&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(t){Ue.call(null,t)}q(Te,e)}function Fe(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Ee(t,t,e)).c=!0,Oe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new Ve(t);me((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=_e,De(this,Ie,t)},t.ad=function(t){this.a=_e,De(this,ke,t)},t.gc=function(){for(var t;t=Me(this);)je(this,t,this.a,this.i);this.h=!1};var Ue=ve;function Ve(t){P.call(this,t)}function ze(){this.ya=this.ya,this.pa=this.pa}_(Ve,P),Ve.prototype.name="cancel";var We={};function Be(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}(t);delete We[e]}}ze.prototype.ya=!1,ze.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},$e=!$t||9<=Number(oe),Ke=$t&&!re("9"),Ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(t){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Je,Ye);var Qe=He({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Je.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ze,this.wa=this.Qa=!1}function en(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new tn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=wn(n),t&&t[Xe]?_n(t,e,n,d(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=gn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=mn,e=$e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=wn(n),t&&t[Xe]?In(t,e,n,d(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=wn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Xe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function mn(t,e){if(t.wa)return!0;if(!$e){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Je(e,this))}function gn(t){return(t=t[an])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function bn(){ze.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Tn(t){var e=null;return new be((function(n,r){-1==(e=Cn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(bn,ze),bn.prototype[Xe]=!0,bn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;dt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Nn.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return An(this.b,t)?this.b[t]:e},t.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof On?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,qn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Dn(this,n[4]),this.f=Un(n[5]||"",!0),qn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Gn(null,this.i))}function Rn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function qn(t,e,n){e instanceof Gn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,$n)),t.b=new Gn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function jn(t){return t instanceof On?new On(t):new On(t,void 0)}function Fn(t,e,n,r){var i=new On(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Vn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Hn:Bn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,Kn)),t.join("")},On.prototype.resolve=function(t){var e=new On(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?qn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Bn=/[#\?:]/g,Hn=/[#\?]/g,$n=/[#\?@]/g,Kn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Jn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Gn(null,void 0);t=En(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Qn(t,e){Yn(t),e=er(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function Xn(t,e){return Yn(t),e=er(t,e),An(t.a.b,e)}function Zn(t,e,n){Qn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Y(n)),t.b+=n.length)}function tr(t){var e=new Gn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Gn.prototype).add=function(t,e){Yn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Yn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Yn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=G(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Xn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Nr();return $t&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Rt(t)||Lt)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Tr(Nr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Rt(void 0!==n.href?n.href:String(n))||Lt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((lt("iPhone")&&!lt("iPod")&&!lt("iPad")||lt("iPad")||lt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=de(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Dt(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Ft("",r,n,a),t=xt(e),a&&(Gt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Mt(t=(r=_t())?r.createHTML(t):t,null,jt),r=a.document)&&(r.write(function(t){return t instanceof Mt&&t.constructor===Mt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Ft(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new be((function(e){"complete"==a.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Nr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function wr(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function br(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return ce.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ce.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Ir(){var t=_r();return"ReactNative"===t||"Node"===t}var kr="Firefox",Cr="Chrome";function Tr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?kr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Cr:"Safari"}var Er={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Er)i[Er[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Tr(i=Nr()):"Worker"===r&&(r=Tr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return a.navigator&&a.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ar(){try{var t=a.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(t){return br()&&!!a.indexedDB}return!1}function Pr(){return(Or()||"chrome-extension:"===Rr()||yr())&&!Ir()&&Ar()&&!br()}function Or(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Dr(t){return!fr(t=t||Nr())&&Tr(t)!=kr}function qr(t){return void 0===t?null:nr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Fr(t){return"Safari"!=Tr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=_r(),this.b=fr(t)||"ReactNative"===e}function zr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Br(){return!(!xr("fireauth.oauthhelper",a)&&!xr("fireauth.iframe",a))}Vr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Or()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,$r={};function Kr(t){$r[t]||($r[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Gr={};Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Gr.abcd}catch(Bt){Hr=!1}function Yr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Qr(t){var e={};return Jr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Xr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ri]),Yr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Yr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[ci],r=t[fi],i=t[pi];if(t=ti(t[hi]),!i||i!=ui&&i!=li&&!n||i==li&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[vi]=n||null,e[gi]=n||null,e[di]=r):(e[vi]=r||null,e[gi]=r||null,e[di]=n||null),e[mi]=t||null,Yr(this,wi,i),Yr(this,yi,Xr(e))}_(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",ci="email",hi="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",mi="multiFactorInfo",gi="previousEmail",yi="data",wi="operation";function bi(t){var e=Mn(t=jn(t),_i)||null,n=Mn(t,Ii)||null,r=Mn(t,Ti)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new k("argument-error",_i+", "+Ii+"and "+Ti+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,ki)||null,languageCode:Mn(t,Ci)||null,tenantId:Mn(t,Ei)||null})}var _i="apiKey",Ii="oobCode",ki="continueUrl",Ci="languageCode",Ti="mode",Ei="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new bi(t)}catch(t){return null}}function xi(t){var e=t[Di];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ai];if(n&&"object"==typeof n){e=n[Mi];var r=n[qi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",qi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Oi])&&"boolean"!=typeof e)throw new k("argument-error",Oi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ai="android",Pi="dynamicLinkDomain",Oi="handleCodeInApp",Ri="iOS",Di="url",qi="installApp",Li="minimumVersion",Mi="packageName",ji="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function zi(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Wi(t){try{return new zi(t)}catch(t){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}zi.prototype.T=function(){return this.f},zi.prototype.l=function(){return this.c},zi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$i=["client_id","response_type","scope","redirect_uri","state"],Ki={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:$i},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:$i},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:$i},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Gi(t){for(var e in Ki)if(Ki[e].fa==t)return Ki[e];return null}function Yi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Qi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Ji])return new Xi(t)}catch(t){}return null}var Ji="idToken",Qi="providerId";function Xi(t){var e=t[Qi];if(!e&&t[Ji]){var n=Wi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Xi.call(this,t),Yr(this,"profile",Xr((t=Mr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=jn(t),n=Mn(e,"link"),r=Mn(jn(n),"link");return e=Mn(e,"deep_link_id"),Mn(jn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}_(Zi,Xi),_(to,Zi),_(eo,Zi),_(no,Zi),_(ro,Zi);var ao="enroll",so="signin";function uo(){}function lo(t,e){return t.then((function(t){if(t[Xa]){var n=Wi(t[Xa]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==E+"user-not-found"?new k("user-mismatch"):t}))}function co(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function go(t,e){this.Qc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Gi(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function wo(t){go.call(this,t,$i),this.a=[]}function bo(){wo.call(this,"facebook.com")}function _o(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Io(){wo.call(this,"github.com")}function ko(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Co(){wo.call(this,"google.com"),this.Ca("profile")}function To(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Eo(){go.call(this,"twitter.com",Hi)}function So(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Ao(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Oo(e)))throw new k("argument-error","Invalid email link!");return new No(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Oo(t){return(t=Ni(t=io(t)))&&t.operation===ui?t:null}function Ro(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new k("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function qo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Lo(t){try{this.a=t||ce.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Ro({fb:t,eb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return _o(n);case"github.com":return ko(n);case"twitter.com":return So(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new co(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Fo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function zo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Se(this.a):Se(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},co.prototype.ka=function(t){return bs(t,ho(this))},co.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,_s(t,n)},co.prototype.c=function(t,e){return lo(Is(t,ho(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return bs(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,_s(t,n)},po.prototype.c=function(t,e){return lo(Is(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Jb=ft(t),this},_(yo,go),_(wo,go),wo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},wo.prototype.Rb=function(){return Y(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},_(bo,wo),Yr(bo,"PROVIDER_ID","facebook.com"),Yr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(Io,wo),Yr(Io,"PROVIDER_ID","github.com"),Yr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),_(Co,wo),Yr(Co,"PROVIDER_ID","google.com"),Yr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),_(Eo,go),Yr(Eo,"PROVIDER_ID","twitter.com"),Yr(Eo,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?ru(t,As,{email:this.a,oobCode:this.f}):ru(t,Xs,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Bs,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return lo(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Ao,{PROVIDER_ID:"password"}),Jr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.gb(qo(this))},Ro.prototype.b=function(t,e){var n=qo(this);return n.idToken=e,ru(t,tu,n)},Ro.prototype.c=function(t,e){var n=qo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.gb=function(t,e){var n=this.a.a;return Se(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,$s,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Ks,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,zs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Jr(Lo,{PROVIDER_ID:"phone"}),Jr(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.T=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Bo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function $o(t,e,n){k.call(this,t,n),(t=e||{}).Kb&&Yr(this,"email",t.Kb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.$b&&Yr(this,"tenantId",t.$b)}function Ko(t){if(t.code){var e=t.code||"";0==e.indexOf(E)&&(e=e.substring(E.length));var n={credential:jo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new $o(e,n,t.message)}return null}function Go(){}function Yo(t){return t.c||(t.c=t.b())}function Jo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}_(Ho,k),_($o,k),$o.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},$o.prototype.toJSON=function(){return this.w()},Go.prototype.c=null,_(Jo,Go),Jo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Jo,_(Xo,Go),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(R("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(p(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},ca=null;function ha(t){var e;if(ca||(ca=new na(""),la[""]=ca,ca.c=aa),!(e=la[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(pa,Go),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),_(da,bn);var va=0;function ma(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ga(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ya(t)}function ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wa(t){bn.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ba,this.u=this.S=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ya(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ga(this)),this.readyState=va},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ya(this)),this.a&&(this.readyState=3,ya(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ma(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ga(this):ya(this),3==this.readyState&&ma(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ga(this))},t.sc=function(t){this.a&&(this.response=t,ga(this))},t.Va=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ga(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(wa,bn);var ba="";wa.prototype.b=ha("goog.net.XhrIo");var _a=/^https?$/i,Ia=["POST","PUT"];function ka(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?Yo(t.D):Yo(Wo),t.a.onreadystatechange=w(t.Wb,t);try{fa(t.b,Oa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fa(t.b,Oa(t,"Error opening Xhr: "+e.message)),void Ta(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=Sn(t),r=En(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ca,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!H(Ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xa(t),0<t.g&&(t.u=function(t){return $t&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Oa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=Cn(t.Ma,t.g,t)),fa(t.b,Oa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,Oa(t,"Send error: "+e.message)),Ta(t,e)}}function Ca(t){return"content-type"==t.toLowerCase()}function Ta(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ea(t),Na(t)}function Ea(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Sa(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Aa(t)&&2==Pa(t))fa(t.b,Oa(t,"Local request error detected and ignored"));else if(t.i&&4==Aa(t))Cn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Aa(t)){fa(t.b,Oa(t,"Request complete")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Pn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!_a.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<Aa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),l=""}t.h=l+" ["+Pa(t)+"]",Ea(t)}}finally{Na(t)}}}function Na(t,e){if(t.a){xa(t);var n=t.a,r=t.C[0]?c:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function xa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Aa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<Aa(t)?t.a.status:-1}catch(t){return-1}}function Oa(t,e){return e+" ["+t.P+" "+t.l+" "+Pa(t)+"]"}function Ra(t){var e=Ba;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Da(t,e,n){t.a=!0,t.c=n,t.f=!e,ja(t)}function qa(t){if(t.a){if(!t.v)throw new Fa(t);t.v=!1}}function La(t,e,n,r){t.g.push([e,n,r]),t.a&&ja(t)}function Ma(t){return B(t.g,(function(t){return p(t[1])}))}function ja(t){if(t.h&&t.a&&Ma(t)){var e=t.h,n=za[e];n&&(a.clearTimeout(n.a),delete za[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(A(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ma(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ra?(La(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Va(e),za[e.a]=e,t.h=e.a)}function Fa(){P.call(this)}function Ua(){P.call(this)}function Va(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=wa.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Oa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Oa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Na(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Na(this,!0)),wa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Sa(this):this.Jc())},t.Jc=function(){Sa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ba:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},Ra.prototype.cancel=function(t){if(this.a)this.c instanceof Ra&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ua(this),qa(this),Da(this,!1,t))}},Ra.prototype.m=function(t,e){this.i=!1,Da(this,t,e)},Ra.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return La(this,r,(function(t){t instanceof Ua?o.cancel():i(t)})),o.then(t,e,n)},Ra.prototype.$goog_Thenable=!0,_(Fa,P),Fa.prototype.message="Deferred has already fired",Fa.prototype.name="AlreadyCalledError",_(Ua,P),Ua.prototype.message="Deferred was canceled",Ua.prototype.name="CanceledError",Va.prototype.c=function(){throw delete za[this.a],this.b};var za={};function Wa(t){var e,n=document,r=kt(t).toString(),i=de(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ra(o);return e=window.setTimeout((function(){Ha(i,!0);var t=new Ga(Ka,"Timeout reached for loading script "+r);qa(s),Da(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,!1,e),qa(s),Da(s,!0,null))},i.onerror=function(){Ha(i,!0,e);var t=new Ga($a,"Error while loading script "+r);qa(s),Da(s,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===u&&(u=l(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ba(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=c,t.onerror=c,t.onreadystatechange=c,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $a=0,Ka=1;function Ga(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Ya(t){this.f=t}function Ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=ft(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=ft(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&ce.INTERNAL.node&&ce.INTERNAL.node.XMLHttpRequest)&&!br())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new pa(self):Ir()?this.f=new Ya(n):this.f=new Xo,this.b=null}_(Ga,P),_(Ya,Go),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var Qa,Xa="idToken",Za=new Vr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new Vr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=Nr();return!((t=Tr(t)!=Cr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&oe&&!(9<oe))})()||br()?t=w(t.u,t):(Qa||(Qa=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[ls]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){La(t,null,e,void 0)}(Wa(Ct(us,{onload:ls})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=w(t.s,t)),t(e,n,r,i,o,s)}Ja.prototype.T=function(){return this.b},Ja.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new wa(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),In(s,"ready",(function(){u&&clearTimeout(u),Be(this)})),In(s,"timeout",(function(){u&&clearTimeout(u),Be(this),e&&e(null)})),ka(s,t,n,r,i)};var us=new mt(bt,"https://apis.google.com/js/client.js?onload=%{onload}"),ls="__fcb"+Math.floor(1e6*Math.random()).toString();function cs(t,e,n,r,i,o,a){var s=jn(e+n);Ln(s,"key",t.c),a&&Ln(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&Ln(s,l,i[l]);return new be((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:nr(Lr(i)),t.a,t.v.get())}))}function hs(t){if("string"!=typeof(t=t.email)||!mr.test(t))throw new k("invalid-email")}function fs(t){"email"in t&&hs(t)}function ps(t){if(!t[Xa]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,ft(t));throw new k("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Ja.prototype.s=function(t,e,n,r,i){var o=this;Qa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ja.prototype.Ab=function(){return ru(this,Hs,{})},Ja.prototype.Cb=function(t,e){return ru(this,Ws,{idToken:t,email:e})},Ja.prototype.Db=function(t,e){return ru(this,Bs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function gs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Xn(t=new Gn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ws(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ko(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ko(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ko(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function bs(t,e){return e.returnIdpCredential=!0,ru(t,Gs,e)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Js,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function ks(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Ja.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ct(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ws,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,js,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,qs,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ls,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Ms,t)},t.gb=function(t){return ru(this,Zs,t)},t.ob=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Ts,{oobCode:t})},t.kb=function(t){return ru(this,Cs,{oobCode:t})};var Cs={endpoint:"setAccountInfo",A:ks,Z:"email",B:!0},Ts={endpoint:"resetPassword",A:ks,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Es={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new k("weak-password")},G:ps,V:!0,B:!0},Ss={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",O:["idToken"]},xs={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},As={endpoint:"emailLinkSignin",O:["email","oobCode"],A:hs,G:ps,V:!0,B:!0},Ps={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:hs,G:ps,V:!0},Os={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ms,G:ps,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:ps,B:!0,Na:!0},Ds={endpoint:"getAccountInfo"},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},Ls={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},js={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},Fs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Us={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Vs={endpoint:"resetPassword",A:ks,Z:"email",B:!0},zs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ws={endpoint:"setAccountInfo",O:["idToken"],A:fs,V:!0},Bs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fs(t),!t.password)throw new k("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},$s={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Ks={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Gs={endpoint:"verifyAssertion",A:gs,Za:ys,G:ws,V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:gs,Za:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Js={endpoint:"verifyAssertion",A:function(t){if(gs(t),!t.idToken)throw new k("internal-error")},Za:ys,G:ws,V:!0},Qs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ps,V:!0,B:!0},Xs={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new k("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ko(t);ps(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Xa]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ne(new k("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Se(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),cs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=qr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.sb=function(t){return(cu||(cu=new be((function(t,e){function n(){Ur(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:uu.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Se(Wa(r=Ct(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw cu=null,t})))).then((function(){return new be((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),lu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new mt(bt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Vr(3e4,6e4),lu=new Vr(5e3,15e3),cu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Fn((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Fn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return ce.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=lr();return function(t){return ru(t,Fs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(lr())}))}function mu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)}))}(t)}))),t.m}function gu(t){return t.l||(t.C=t.c?Sr(t.c,pu(t.b)):null,t.l=new Ja(t.g,x(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,l,c,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=ft(u||null),t.f=l,t.zb(c).toString()}function wu(t){if(this.a=t||ce.INTERNAL.reactNative&&ce.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=w(this.c,this)}hu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Qn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Qn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Qn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=Fn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Fn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=ce.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ht(e)||Ln(t,"customParameters",qr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):Qn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Qn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Qn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Mn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Qn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Qn(t.b,"eid"),(a=pu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Tn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Nr();return!Dr(t)&&!Fr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Ne(new k("popup-blocked"));if(a&&!Dr())return this.ma().o((function(e){pr(t),i(e)})),r(),Se();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(Fo(n),a)||cr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){Fo(e),cr(yu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){K(this.h,(function(e){return e==t}))},(t=wu.prototype).get=function(t){return Se(this.a.getItem(t)).then((function(t){return t&&Mr(t)}))},t.set=function(t,e){return Se(this.a.setItem(t,qr(e)))},t.U=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Iu=[];function ku(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Cu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,a,s,u=n||{},l=null;if(t.b)return Ne(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(l),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Su(t,l),e})).o((function(e){throw Su(t,l),e}))}function Su(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(t.a,(function(t){return t==e}))}}function Nu(){if(!Ou())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(V(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),ku(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),ku(this.v,"ping",(function(){return Se(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Se().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Se(null)}().then((function(e){(t.h=e)&&(t.g=new Tu(new Cu(e)),Eu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xu(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return xu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Au(t){return t.i||(t.i=xu(t)),t.i}function Pu(t,e){var n=0;return new be((function r(i,o){Au(t).then(e).then(i).o((function(e){if(!(3<++n))return Au(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ou(){try{return!!a.indexedDB}catch(t){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Du(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Se()}function Mu(t){return Au(t).then((function(t){var e=Ru(Du(t,!1));return e.getAll?qu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Fu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then((function(){if(Ou()){var t=jr(),r="__sak"+t;return _u||(_u=new Nu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function Uu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==_r();if(!(t=zu()||t&&ce.INTERNAL.node&&ce.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=zu()||ce.INTERNAL.node.localStorage,this.type="localStorage"}function zu(){try{var t=a.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){this.type="nullStorage"}function Bu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&ce.INTERNAL.node&&ce.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Hu()||ce.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function $u(){var t={};t.Browser=Yu,t.Node=Ju,t.ReactNative=Qu,t.Worker=Xu,this.a=t[_r()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(Se().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Su(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Pu(this,(function(e){return qu((e=Ru(Du(e,!0))).get(t))})).then((function(i){return Pu(n,(function(o){if(o=Ru(Du(o,!0)),i)return i.value=e,qu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,qu(o.add(a))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Pu(this,(function(e){return qu(Ru(Du(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Pu(this,(function(r){return n=!0,e.b++,qu(Ru(Du(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}ju(t),e()}(this),this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Fu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t}))},(t=Uu.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.U=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Se().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=qr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Wu.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.U=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return Se().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=qr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Ku,Gu,Yu={F:Vu,cb:Bu},Ju={F:Vu,cb:Bu},Qu={F:wu,cb:Wu},Xu={F:Vu,cb:Wu},Zu={rd:"local",NONE:"none",td:"session"};function tl(){var t=!(Fr(Nr())||!wr()),e=Dr(),n=Ar();this.m=t,this.h=e,this.l=n,this.a={},Ku||(Ku=new $u),t=Ku;try{this.g=!ur()&&Br()||!a.indexedDB?new t.a.F:new Fu(br()?new Uu:new t.a.F)}catch(t){this.g=new Uu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Uu}this.v=new Uu,this.f=w(this.Zb,this),this.b={}}function el(){return Gu||(Gu=new tl),Gu}function nl(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function il(t,e,n){return n=rl(e,n),"local"==e.F&&(t.b[n]=null),nl(t,e.F).U(n)}function ol(t){t.c&&(clearInterval(t.c),t.c=null)}function al(t){this.a=t,this.b=el()}(t=tl.prototype).get=function(t,e){return nl(this,t.F).get(rl(t,e))},t.set=function(t,e,n){var r=rl(t,n),i=this,o=nl(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rl(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ht(this.a)&&(nl(this,"local").ca(this.f),this.h||(ur()||!Br())&&a.indexedDB||!this.l||function(t){ol(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rl(t,e),this.a[t]&&(K(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(nl(this,"local").ia(this.f),ol(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nl(this,"local").ia(this.f):ol(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},$t&&oe&&10==oe&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,w(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var sl,ul={name:"authEvent",F:"local"};function ll(){this.a=el()}function cl(t,e){this.b=hl,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sl&&(sl=a.Int32Array?new Int32Array(yl):yl),this.reset()}_(cl,(function(){this.b=-1}));for(var hl=64,fl=hl-1,pl=[],dl=0;dl<fl;dl++)pl[dl]=0;var vl=G(128,pl);function ml(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|sl[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function gl(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ml(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ml(t),i=0)}}t.c=i,t.g+=n}cl.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var yl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wl(){cl.call(this,8,bl)}_(wl,cl);var bl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _l(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new ll,this.g=new al(this.h),this.f=null,this.b=[],this.a=this.c=null}function Il(t){return new k("invalid-cordova-configuration",t)}function kl(t){var e=new wl;gl(e,t),t=[];var n=8*e.g;56>e.c?gl(e,vl,56-e.c):gl(e,vl,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ml(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Cl(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tl(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),El(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=jn(i),"firebaseError")||null))?C(o):null)?new Uo(r.c,r.b,null,null,o,null,r.T()):new Uo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cl(t,i)}))}var n=new Uo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Tn(500).then((function(){return El(t).then((function(){r||Cl(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Bo||(Bo=new zo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function El(t){var e=null;return function(t){return t.b.get(ul,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,il((n=t.g).b,ul,n.a)})).then((function(){return e}))}function Sl(t){this.a=t,this.b=el()}(t=_l.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?gr().then((function(){return new be((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof xr("universalLinks.subscribe",a))throw Il("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",a))throw Il("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",a))throw Il("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",a))throw Il("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Pb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Se()},t.Nb=function(){return Ne(new k("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ne(new k("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,l=null,c=null;return this.c=Se().then((function(){return Fo(e),Tl(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Uo(e,r,null,o,new k("no-auth-event"),null,i),u=xr("BuildInfo.packageName",a);if("string"!=typeof u)throw new k("invalid-cordova-configuration");var l=xr("BuildInfo.displayName",a),c={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return Ne(new k("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=kl(o),c.sessionId=o;var h=yu(t.v,t.i,t.l,e,n,null,r,t.m,c,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(ul,s.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",a)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",a)))throw new k("invalid-cordova-configuration");e=Nr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){s||(s=Tn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},c=function(){zr()&&l()},o.addEventListener("resume",l,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return El(i).then((function(){throw t}))}))})).oa((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Tl(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Ta=function(t){K(this.b,(function(e){return e==t}))};var Nl={name:"pendingRedirect",F:"session"};function xl(t){return il(t.b,Nl,t.a)}function Al(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Hl,this.C=new Jl,this.g=new Sl(Wl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Pl(this.D,this.v,this.m,T,this.J)}function Pl(t,e,n,r,i){var o=ce.SDK_VERSION||null;return yr()?new _l(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Ol(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rl(t){t.a.Yb()&&Ol(t).o((function(e){var n=new Uo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fl(e)&&t.s(n)})),t.a.Ub()||$l(t.b)}function Dl(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nl,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?xl(t.g).then((function(){Ol(t).o((function(e){var n=new Uo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fl(e)&&t.s(n)}))})):Rl(t)})).o((function(){Rl(t)}))}function ql(t,e){K(t.h,(function(t){return t==e}))}Al.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Pl(this.D,this.v,this.m,null,this.J),this.i={}},Al.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $l(this.b),e};var Ll=new Vr(2e3,1e4),Ml=new Vr(3e4,6e4);function jl(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Fl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ul(t,e,n,r,i){var o;return function(t){return t.b.set(Nl,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Fl(e))throw new k("operation-not-supported-in-this-environment");return o=e,xl(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):xl(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Vl(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Ll.get())}Al.prototype.ra=function(){return this.b.ra()};var zl={};function Wl(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bl(t,e,n,r){var i=Wl(e,n,r);return zl[i]||(zl[i]=new Al(t,e,n,r)),zl[i]}function Hl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $l(t){t.g||(t.g=!0,Yl(t,!1,null,null))}function Kl(t){t.g&&!t.i&&Yl(t,!1,null,null)}function Gl(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yl(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gl(t,n):Gl(t,{user:null}),t.f=[],t.c=[]}function Jl(){}function Ql(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Xl(t,e){this.a=e,Yr(this,"verificationId",t)}function Zl(t,e,n,r){return new Lo(t).gb(e,n).then((function(t){return new Xl(t,r)}))}function tc(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function ec(t,e,n){var r=e&&e[rc];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;V(e[nc]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Hl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hl.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Yl(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Yl(t,s,e,null)})).o((function(e){Yl(t,s,null,e)}))}(this,t,e):Ne(new k("invalid-auth-event")):(Yl(this,!1,null,null),Se())}else Ne(new k("invalid-auth-event"))},Hl.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Tn(Ml.get()).then((function(){t.b||(t.g=!0,Yl(t,!0,null,e))}))}(t))}))},Jl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ne(new k("invalid-auth-event"))}else Ne(new k("invalid-auth-event"))},Xl.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var nc="mfaInfo",rc="mfaPendingCredential";function ic(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new ec(t,e,n),Yr(this,"resolver",this.b)}function oc(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ic(e,t.serverResponse,n,t.message)}catch(t){}return null}function ac(){}function sc(t){Yr(this,"factorId",t.fa),this.a=t}function uc(t){if(sc.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function lc(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function cc(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hc(this,n)}function hc(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function fc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function pc(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return zr()||!t?Se():new be((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){pc(t,!0)})).o((function(e){t.i(e)&&pc(t,!1)}))}function dc(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vc(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function mc(t,e){t.b=Wi(e[Xa]||""),t.a=e.refreshToken,vc(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gc(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Jn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,vc(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yc(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function wc(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bc(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=ce.SDK_VERSION?Sr(ce.SDK_VERSION):null;this.a=new Ja(this.l,x(T),r),(this.u=t.emulatorConfig||null)&&is(this.a,this.u),this.h=new dc(this.a),xc(this,e[Xa]),mc(this.h,e),Yr(this,"refreshToken",this.h.a),Oc(this,n||{}),bn.call(this),this.P=!1,this.s&&Pr()&&(this.b=Bl(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fc((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=w(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){_c(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Cc(i,t.f)},this.ja=null,this.S=new cc(this,n),Yr(this,"multiFactor",this.S)}function _c(t,e){t.u=e,is(t.a,e),t.b&&(e=t.b,t.b=Bl(t.s,t.l,t.m,t.u),t.P&&(ql(e,t),Dl(t.b,t)))}function Ic(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function kc(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function Cc(t,e){t.aa=e,as(t.a,ce.SDK_VERSION?Sr(ce.SDK_VERSION,t.aa):null)}function Tc(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function Ec(t){try{return ce.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sc(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function Nc(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function xc(t,e){t.Aa=e,Yr(t,"_lat",e)}function Ac(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ae(e).then((function(){return t}))}function Pc(t){t.b&&!t.P&&(t.P=!0,Dl(t.b,t))}function Oc(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rc(){}function Dc(t){return Se().then((function(){if(t.J)throw new k("app-deleted")}))}function qc(t){return W(t.providerData,(function(t){return t.providerId}))}function Lc(t,e){e&&(Mc(t,e.providerId),t.providerData.push(e))}function Mc(t,e){K(t.providerData,(function(t){return t.providerId==e}))}function jc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Fc(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yr(t,"metadata",function(t){return new yc(t.a,t.b)}(e.metadata)):Yr(t,"metadata",new yc),V(e.providerData,(function(e){Lc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Yr(t,"refreshToken",t.h.a),hc(t.S,e.S.b))}function Uc(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ds,{idToken:e}).then(w(t.Kc,t))}(t,e).then((function(){return n||jc(t,"isAnonymous",!1),e}))}))}function Vc(t,e){e[Xa]&&t.Aa!=e[Xa]&&(mc(t.h,e),t.dispatchEvent(new lc("tokenChanged")),xc(t,e[Xa]),jc(t,"refreshToken",t.h.a))}function zc(t,e){return Uc(t).then((function(){if(H(qc(t),e))return Ac(t).then((function(){throw new k("provider-already-linked")}))}))}function Wc(t,e,n){return Qr({user:t,credential:jo(e),additionalUserInfo:e=Yi(e),operationType:n})}function Bc(t,e){return Vc(t,e),t.reload().then((function(){return t}))}function Hc(t,e,n,r,i){if(!Pr())return Ne(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=Gi(n.providerId),a=jr(t.uid+":::"),s=null;(!Dr()||wr())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,ce.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=dr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Kc(t),!i)return t.I().then((function(){}))})).then((function(){return jl(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Vl(t.b,t,e,u,a)}))})).then((function(t){return u&&pr(u),t?Qr(t):null})).o((function(t){throw u&&pr(u),t})),Gc(t,r,i)}function $c(t,e,n,r,i){if(!Pr())return Ne(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(Kc(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ac(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Qc,t.w(),e.a)),e})).then((function(){return Ul(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xc(t.ha);throw o})).then((function(){if(o)throw o})),Gc(t,r,i)}function Kc(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Gc(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ne(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new lc("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){$(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oc(e.w(),Ec(t),w(t.jc,t))),n||e}))}function Yc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Xa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bc(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Lc(i,Qr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Jc(t){this.a=t,this.b=el()}ec.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nc],delete n[rc],dt(n,t),e.g(n)}))},_(ic,k),ac.prototype.tb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:qo(t.a)}),ru(e,Os,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:qo(t.a)}),ru(e,Rs,n)}))}(this,t,e)},_(sc,ac),_(uc,sc),_(lc,Ye),(t=cc.prototype).yc=function(t){hc(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vc(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return hc(e,r),Vc(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},fc.prototype.start=function(){this.a=this.c,pc(this,!0)},fc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?gc(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},yc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(bc,bn),bc.prototype.xa=function(t){this.za=t,rs(this.a,t)},bc.prototype.la=function(){return this.za},bc.prototype.Ga=function(){return Y(this.aa)},bc.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Yr(bc.prototype,"providerId","firebase"),(t=bc.prototype).reload=function(){var t=this;return Gc(this,Dc(this).then((function(){return Uc(t).then((function(){return Ac(t)})).then(Rc)})))},t.oc=function(t){return this.I(t).then((function(t){return new tc(t)}))},t.I=function(t){var e=this;return Gc(this,Dc(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.Aa&&(xc(e,t.accessToken),e.dispatchEvent(new lc("tokenChanged"))),jc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Oc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new wc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lc(this,e[n]);jc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new lc("userReloaded",{hd:t}))},t.Lc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Gc(this,t.c(this.a,this.uid).then((function(t){return Vc(e,t),n=Wc(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Gc(this,zc(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Wc(e,t,"link"),Bc(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Gc(this,zc(this,"phone").then((function(){return Zl(Ec(n),t,e,w(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Gc(this,Se().then((function(){return Zl(Ec(n),t,e,w(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Gc(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vc(e,t),e.reload()})))},t.ed=function(t){var e=this;return Gc(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vc(e,t),e.reload()})))},t.Db=function(t){var e=this;return Gc(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vc(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dc(this);var e=this;return Gc(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vc(e,t),jc(e,"displayName",t.displayName||null),jc(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))})),Ac(e)})).then(Rc))},t.cd=function(t){var e=this;return Gc(this,Uc(this).then((function(n){return H(qc(e),t)?function(t,e,n){return ru(t,xs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(qc(e),(function(t){n[t]||Mc(e,t)})),n[Lo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Ac(e)})):Ac(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return Gc(this,this.I().then((function(e){return ru(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new lc("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Ic(t,null),kc(t,null),Tc(t,null),t.N=[],t.J=!0,Nc(t),Yr(t,"refreshToken",null),t.b&&ql(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Mb,this):null},t.Ec=function(t){var e=this;return Hc(this,"linkViaPopup",t,(function(){return zc(e,t.providerId).then((function(){return Ac(e)}))}),!1)},t.Nc=function(t){return Hc(this,"reauthViaPopup",t,(function(){return Se()}),!0)},t.Fc=function(t){var e=this;return $c(this,"linkViaRedirect",t,(function(){return zc(e,t.providerId)}),!1)},t.Oc=function(t){return $c(this,"reauthViaRedirect",t,(function(){return Se()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gc(this,this.I().then((function(n){return _s(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Wc(i,t,"link"),Bc(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gc(this,Se().then((function(){return lo(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Wc(i,t,"reauthenticate"),Vc(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Gc(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:Fi(new xi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Gc(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:Fi(new xi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Gc(this,t=lo(Se(t),n.uid).then((function(t){return e=Wc(n,t,"reauthenticate"),Vc(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Qc={name:"redirectUser",F:"session"};function Xc(t){return il(t.b,Qc,t.a)}function Zc(t){this.a=t,this.b=el(),this.c=null,this.f=function(t){var e=nh("local"),n=nh("session"),r=nh("none");return function(t,e,n){var r=rl(e,n),i=nl(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Mr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(eh,t.a).then((function(t){return t?nh(t):e}))}))}))})).then((function(e){return t.c=e,th(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nh("local"),this.a,w(this.g,this))}function th(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(il(t.b,nh(Zu[n]),t.a));return r.push(il(t.b,eh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)xe(t[s],b(o,s),a);else e(i)}))}(r)}Zc.prototype.g=function(){var t=this,e=nh("local");ah(this,(function(){return Se().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return th(t,"local").then((function(){t.c=e}))}))}))};var eh={name:"persistence",F:"session"};function nh(t){return{name:"authUser",F:t}}function rh(t,e){return ah(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ih(t){return ah(t,(function(){return il(t.b,t.c,t.a)}))}function oh(t,e,n){return ah(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Yc(t||{})}))}))}function ah(t,e){return t.f=t.f.then(e,e),t.f}function sh(t){if(this.l=!1,Yr(this,"settings",new Ql),Yr(this,"app",t),!mh(this).options||!mh(this).options.apiKey)throw new k("invalid-api-key");t=ce.SDK_VERSION?Sr(ce.SDK_VERSION):null,this.a=new Ja(mh(this).options&&mh(this).options.apiKey,x(T),t),this.P=[],this.s=[],this.N=[],this.Pa=ce.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=ce.INTERNAL.createSubscribe(w(this.Ac,this)),dh(this,null),this.i=new Zc(mh(this).options.apiKey+":"+mh(this).name),this.D=new Jc(mh(this).options.apiKey+":"+mh(this).name),this.$=bh(this,function(t){var e=mh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Qc,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yc(t||{})}))}(t.D,mh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Xc(t.D)}));return bh(t,e)}(t).then((function(){return oh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ih(t.i)}))):null})).then((function(e){dh(t,e||null)}));return bh(t,n)}(this)),this.h=bh(this,function(t){return t.$.then((function(){return fh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=mh(t).options.authDomain,n=mh(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Bl(e,n,mh(t).name,t.R),Dl(t.b,t),gh(t)&&Pc(gh(t)),t.m){Pc(t.m);var r=t.m;r.xa(t.la()),Ic(r,t),Cc(r=t.m,t.J),Tc(r,t),_c(r=t.m,t.R),kc(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=jn(this.R.url);t=Qr({protocol:t.c,host:t.a,port:t.g,options:Qr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function uh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function lh(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function ch(t){Ye.call(this,"frameworkChanged"),this.f=t}function hh(t){return t.Oa||Ne(new k("auth-domain-config-required"))}function fh(t){if(!Pr())return Ne(new k("operation-not-supported-in-this-environment"));var e=hh(t).then((function(){return t.b.ra()})).then((function(t){return t?Qr(t):null}));return bh(t,e)}function ph(t,e){var n={};return n.apiKey=mh(t).options.apiKey,n.authDomain=mh(t).options.authDomain,n.appName=mh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new bc(t,e);return n&&(i.ha=n),r&&Cc(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return gh(t)&&e.uid==gh(t).uid?(Fc(gh(t),e),t.da(e)):(dh(t,e),Pc(e),t.da(e))})).then((function(){wh(t)}))}function dh(t,e){gh(t)&&(function(t,e){K(t.W,(function(t){return t==e}))}(gh(t),t.Ba),hn(gh(t),"tokenChanged",t.qa),hn(gh(t),"userDeleted",t.za),hn(gh(t),"userInvalidated",t.Aa),Nc(gh(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Sc(e)),Yr(t,"currentUser",e),e&&(e.xa(t.la()),Ic(e,t),Cc(e,t.J),Tc(e,t),_c(e,t.R),kc(e,t))}function vh(t,e){var n=null,r=null;return bh(t,e.then((function(e){return n=jo(e),r=Yi(e),ph(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oc(e.w(),t,w(t.kc,t))),n||e})).then((function(){return Qr({user:gh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function mh(t){return t.app}function gh(t){return t.currentUser}function yh(t){return gh(t)&&gh(t)._lat||null}function wh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yh(t))}}function bh(t,e){return t.P.push(e),e.oa((function(){$(t.P,e)})),e}function _h(){}function Ih(){this.a={},this.b=1e12}Zc.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Ar()&&"none"!==t)throw n}}(t),ah(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,th(n,t)})).then((function(){if(n.c=nh(t),e)return n.b.set(n.c,e,n.a)})):Se()}))},_(sh,bn),_(uh,Ye),_(lh,Ye),_(ch,Ye),(t=sh.prototype).yb=function(t){return bh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new uh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&gr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,is(this.a,this.R),this.dispatchEvent(new lh(this.R))}},t.Gc=function(t){this.J.push(t),as(this.a,ce.SDK_VERSION?Sr(ce.SDK_VERSION,this.J):null),this.dispatchEvent(new ch(this.J))},t.Ga=function(){return Y(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:mh(this).options.apiKey,authDomain:mh(this).options.authDomain,appName:mh(this).name,currentUser:gh(this)&&gh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vh(i,bs(i.a,o))}))},t.Xc=function(t){if(!Pr())return Ne(new k("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=jr(),i=null;(!Dr()||wr())&&mh(this).options.authDomain&&t.isOAuthProvider&&(i=yu(mh(this).options.authDomain,mh(this).options.apiKey,mh(this).name,"signInViaPopup",t,null,r,ce.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return bh(this,n=hh(this).then((function(n){return jl(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Vl(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Qr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Pr())return Ne(new k("operation-not-supported-in-this-environment"));var e=this;return bh(this,hh(this).then((function(){return function(t){return ah(t,(function(){return t.b.set(eh,t.c.F,t.a)}))}(e.i)})).then((function(){return Ul(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fh(this).then((function(e){return t.b&&Kl(t.b.b),e})).o((function(e){throw t.b&&Kl(t.b.b),e}))},t.dd=function(t){if(!t)return Ne(new k("null-user"));if(this.S!=t.tenantId)return Ne(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=mh(this).options.apiKey,n.authDomain=mh(this).options.authDomain,n.appName=mh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Xa]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bc(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Cc(e,r),Fc(e,t),e}(t,n,e.D,e.Ga());return bh(this,this.h.then((function(){if(mh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return gh(e)&&t.uid==gh(e).uid?(Fc(gh(e),t),e.da(t)):(dh(e,r),Pc(r),e.da(r))})).then((function(){wh(e)})))},t.Bb=function(){var t=this;return bh(this,this.h.then((function(){return t.b&&Kl(t.b.b),gh(t)?(dh(t,null),ih(t.i).then((function(){wh(t)}))):Se()})))},t.Zc=function(){var t=this;return oh(this.i,mh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=gh(t)&&e){n=gh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Fc(gh(t),e),gh(t).I();(gh(t)||e)&&(dh(t,e),e&&(Pc(e),e.ha=t.D),t.b&&Dl(t.b,t),wh(t))}}))},t.da=function(t){return rh(this.i,t)},t.mc=function(){wh(this),this.da(gh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vh(e,Se(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(gh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),bh(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yh(t)))})))}(this,(function(){t.next(gh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(gh(r)):"function"==typeof t.next&&t.next(gh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(gh(r)):"function"==typeof t.next&&t.next(gh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return bh(this,this.h.then((function(){return gh(e)?gh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vh(e,ru(e.a,Qs,{token:t}))})).then((function(t){var n=t.user;return jc(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Xs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Es,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vh(e,t.ka(e.a))}))},t.Sc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=gh(t);if(e&&e.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vh(t,t.a.Ab()).then((function(e){var n=e.user;return jc(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return gh(this)&&gh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&gh(this)&&Sc(gh(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&gh(this)&&Nc(gh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),bh(this,this.h.then((function(){e.l||H(e.s,t)&&t(yh(e))})))},t.removeAuthTokenListener=function(t){K(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nh("local"),t.a,this.ja),this.b&&(ql(this.b,this),Kl(this.b.b)),Promise.resolve()},t.hc=function(t){return bh(this,function(t,e){return ru(t,Ss,{identifier:e,continueUri:Or()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Oo(t)},t.xb=function(t,e){var n=this;return bh(this,Se().then((function(){var t=new xi(e);if(!t.c)throw new k("argument-error",Oi+" must be true when sending sign in link to email");return Fi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return bh(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return bh(this,this.a.Sa(t).then((function(t){return new ai(t)})))},t.kb=function(t){return bh(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return bh(this,Se().then((function(){return void 0===e||ht(e)?{}:Fi(new xi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return bh(this,Zl(this,t,e,w(this.ab,this)))},t.Vc=function(t,e){var n=this;return bh(this,Se().then((function(){var r=e||lr(),i=Po(t,r);if(!(r=Oo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)})))},_h.prototype.render=function(){},_h.prototype.reset=function(){},_h.prototype.getResponse=function(){},_h.prototype.execute=function(){};var kh=null;function Ch(t,e){return(e=Th(e))&&t.a[e]||null}function Th(t){return(t=void 0===t?1e12:t)?t.toString():null}function Eh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Sh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nh(){}function xh(){}Ih.prototype.render=function(t,e){return this.a[this.b.toString()]=new Eh(t,e),this.b++},Ih.prototype.reset=function(t){var e=Ch(this,t);t=Th(t),e&&t&&(e.delete(),delete this.a[t])},Ih.prototype.getResponse=function(t){return(t=Ch(this,t))?t.getResponse():null},Ih.prototype.execute=function(t){(t=Ch(this,t))&&t.execute()},Eh.prototype.getResponse=function(){return Sh(this),this.b},Eh.prototype.execute=function(){Sh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Eh.prototype.delete=function(){Sh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Yr(Nh,"FACTOR_ID","phone"),xh.prototype.g=function(){return kh||(kh=new Ih),Se(kh)},xh.prototype.c=function(){};var Ah=null;function Ph(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Oh=new mt(bt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rh=new Vr(3e4,6e4);Ph.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Rh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete a[e.a]},Se(Wa(Ct(Oh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Ph.prototype.c=function(){this.b--};var Dh=null;function qh(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Ah||(Ah=new xh),s=Ah):(Dh||(Dh=new Ph),s=Dh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[jh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Fh],!a.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ja(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var l=this.a[Lh];this.a[Lh]=function(t){if(Uh(u,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=xr(l,a);"function"==typeof e&&e(t)}};var c=this.a[Mh];this.a[Mh]=function(){if(Uh(u,null),"function"==typeof c)c();else if("string"==typeof c){var t=xr(c,a);"function"==typeof t&&t()}}}var Lh="callback",Mh="expired-callback",jh="sitekey",Fh="size";function Uh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Vh(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function zh(t){if(t.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Wh(t,e,n){var r=!1;try{this.b=n||ce.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=ce.SDK_VERSION?Sr(ce.SDK_VERSION,o):null,qh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,x(T),r)}function Bh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Hh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=qh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vh(this,Se().then((function(){if(Or()&&!br())return gr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Us,{})})).then((function(e){t.a[jh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){zh(this);var t=this;return Vh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ae&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};dt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=de(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ue(o,a)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){zh(this);var t=this;return Vh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){K(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){zh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){zh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Wh,qh);var Hh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $h(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Yh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Jh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Qh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){Bh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(sh.prototype,{kb:{name:"applyActionCode",j:[$h("code")]},Sa:{name:"checkActionCode",j:[$h("code")]},ob:{name:"confirmPasswordReset",j:[$h("code"),$h("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$h("email"),$h("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$h("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$h("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Gh(),Yh(),"nextOrObserver"),Yh("opt_error",!0),Yh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Gh(),Yh(),"nextOrObserver"),Yh("opt_error",!0),Yh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$h("email"),tf(Gh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$h("email"),Gh("actionCodeSettings")]},yb:{name:"setPersistence",j:[$h("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Qh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Qh()]},Tc:{name:"signInWithCustomToken",j:[$h("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$h("email"),$h("password")]},Vc:{name:"signInWithEmailLink",j:[$h("email"),$h("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bc)}},Jh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$h(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$h("url"),Gh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$h("code")]}}),nf(sh.prototype,{lc:{name:"languageCode",lb:tf($h(),Jh(),"languageCode")},ti:{name:"tenantId",lb:tf($h(),Jh(),"tenantId")}}),sh.Persistence=Zu,sh.Persistence.LOCAL="local",sh.Persistence.SESSION="session",sh.Persistence.NONE="none",ef(bc.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Qh()]},rb:{name:"linkWithCredential",j:[Qh()]},Dc:{name:"linkWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Qh()]},ub:{name:"reauthenticateWithCredential",j:[Qh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Gh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$h(null,!0)]},cd:{name:"unlink",j:[$h("provider")]},Cb:{name:"updateEmail",j:[$h("email")]},Db:{name:"updatePassword",j:[$h("password")]},ed:{name:"updatePhoneNumber",j:[Qh("phone")]},Eb:{name:"updateProfile",j:[Gh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$h("email"),tf(Gh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(_h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Ql.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Kh("appVerificationDisabledForTesting")}}),ef(Xl.prototype,{confirm:{name:"confirm",j:[$h("verificationCode")]}}),rf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,xo,Do,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf($h(),Gh(),"json")]),rf(Ao,"credential",(function(t,e){return new No(t,e)}),[$h("email"),$h("password")]),ef(No.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),rf(bo,"credential",_o,[tf($h(),Gh(),"token")]),rf(Ao,"credentialWithLink",Po,[$h("email"),$h("emailLink")]),ef(Io.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),rf(Io,"credential",ko,[tf($h(),Gh(),"token")]),ef(Co.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),rf(Co,"credential",To,[tf($h(),tf(Gh(),Jh()),"idToken"),tf($h(),Jh(),"accessToken",!0)]),ef(Eo.prototype,{Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),rf(Eo,"credential",So,[tf($h(),Gh(),"token"),$h("secret",!0)]),ef(wo.prototype,{Ca:{name:"addScope",j:[$h("scope")]},credential:{name:"credential",j:[tf($h(),tf(Gh(),Jh()),"optionsOrIdToken"),tf($h(),Jh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),ef(po.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),ef(co.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),rf(Lo,"credential",Mo,[$h("verificationId"),$h("verificationCode")]),ef(Lo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf($h(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xh(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xh(t.session,so)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Xh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Ro.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),ef(k.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),ef($o.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),ef(ic.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),ef(ec.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(cc.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$h("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},$h(),"multiFactorInfoIdentifier")]}}),ef(Wh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(bi,"parseLink",Ni,[$h("link")]),rf(Nh,"assertion",(function(t){return new uc(t)}),[Qh("phone")]),function(){if(void 0===ce||!ce.INTERNAL||!ce.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sh,AuthCredential:uo,Error:k};rf(t,"EmailAuthProvider",Ao,[]),rf(t,"FacebookAuthProvider",bo,[]),rf(t,"GithubAuthProvider",Io,[]),rf(t,"GoogleAuthProvider",Co,[]),rf(t,"TwitterAuthProvider",Eo,[]),rf(t,"OAuthProvider",wo,[$h("providerId")]),rf(t,"SAMLAuthProvider",yo,[$h("providerId")]),rf(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof sh)}}]),rf(t,"RecaptchaVerifier",Wh,[tf($h(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof ce.app.App)}}]),rf(t,"ActionCodeURL",bi,[]),rf(t,"PhoneMultiFactorGenerator",Nh,[]),ce.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),ce.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ce.registerVersion("@firebase/auth","0.16.8"),ce.INTERNAL.extendNamespace({User:bc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const fe=[];function pe(e,n=t){let r;const i=new Set;function a(t){if(o(e,t)&&(e=t,r)){const t=!fe.length;for(const t of i)t[1](),fe.push(t,e);if(t){for(let t=0;t<fe.length;t+=2)fe[t][0](fe[t+1]);fe.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const u=[o,s];return i.add(u),1===i.size&&(r=n(a)||t),o(e),()=>{i.delete(u),0===i.size&&(r(),r=null)}}}}const de=()=>{const t=ce.auth();return{authStore:{subscribe:pe({user:null,loading:!0},(e=>t.onAuthStateChanged((async t=>{e(t?{user:t,loading:!1}:{user:null,loading:!1})})))).subscribe},loginWithGoogle:()=>{const e=new ce.auth.GoogleAuthProvider;return t.signInWithPopup(e).then((async({user:t,additionalUserInfo:e})=>{if(t&&e.isNewUser){const e=ce.database().ref(`users/info/${t.uid}`);await e.set({name:t.displayName,photo:t.photoURL})}}))},logout:()=>t.signOut()}};var ve="";function me(t){ve=t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ge,ye=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),bt(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:wt(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),we=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return It(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),be=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ye(e)}}catch(t){}return new we},_e=be("localStorage"),Ie=be("sessionStorage"),ke=new Yt("@firebase/database"),Ce=(ge=1,function(){return ge++}),Te=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,it(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Et;n.update(e);var r=n.digest();return st.encodeByteArray(r)},Ee=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ee.apply(null,i):n+="object"==typeof i?bt(i):i,n+=" "}return n},Se=null,Ne=!0,xe=function(t,e){it(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ke.logLevel=zt.VERBOSE,Se=ke.log.bind(ke),e&&Ie.set("logging_enabled",!0)):"function"==typeof t?Se=t:(Se=null,Ie.remove("logging_enabled"))},Ae=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Ne&&(Ne=!1,null===Se&&!0===Ie.get("logging_enabled")&&xe(!0)),Se){var n=Ee.apply(null,t);Se(n)}},Pe=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ae.apply(void 0,et([t],tt(e)))}},Oe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ee.apply(void 0,et([],tt(t)));ke.error(n)},Re=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ee.apply(void 0,et([],tt(t)));throw ke.error(n),new Error(n)},De=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ee.apply(void 0,et([],tt(t)));ke.warn(n)},qe=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Le="[MIN_NAME]",Me="[MAX_NAME]",je=function(t,e){if(t===e)return 0;if(t===Le||e===Me)return-1;if(e===Le||t===Me)return 1;var n=Ge(t),r=Ge(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Fe=function(t,e){return t===e?0:t<e?-1:1},Ue=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bt(e))},Ve=function(t){if("object"!=typeof t||null===t)return bt(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=bt(e[i]),r+=":",r+=Ve(t[e[i]]);return r+="}"},ze=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function We(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Be=function(t){it(!qe(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var He=new RegExp("^-?(0*)\\d{1,10}$"),$e=-2147483648,Ke=2147483647,Ge=function(t){if(He.test(t)){var e=Number(t);if(e>=$e&&e<=Ke)return e}return null},Ye=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw De("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Je=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Qe=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){De('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Xe=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',De(t)},t}(),Ze=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),tn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,en="websocket",nn="long_polling",rn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_e.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_e.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function on(t,e,n){var r;if(it("string"==typeof e,"typeof type must == string"),it("object"==typeof n,"typeof params must == object"),e===en)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==nn)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return We(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var an=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),It(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return lt(this.counters_)},t}(),sn={},un={};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ln(t){var e=t.toString();return sn[e]||(sn[e]=new an),sn[e]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var cn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Ye((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),hn="start",fn="close",pn=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pe(t),this.stats_=ln(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),on(e,nn,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new cn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new dn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=tt(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===hn)n.id=o,n.password=a;else{if(i!==fn)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=tt(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&tn.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=bt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=at(e),st.encodeByteArray(n,!0)),i=ze(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=bt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),dn=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ce(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){Ae("frame writing exception"),t.stack&&Ae(t.stack),Ae(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ae("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ae("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),vn=null;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */"undefined"!=typeof MozWebSocket?vn=MozWebSocket:"undefined"!=typeof WebSocket&&(vn=WebSocket);var mn=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pe(this.connId),this.stats_=ln(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&tn.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),on(t,en,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_e.set("previous_websocket_failure",!0);try{if(dt());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new vn(this.connURL,[],r)}}catch(t){this.log_("Error instantiating WebSocket.");var i=t.message||t.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==vn&&!t.forceDisallow_},t.previouslyFailed=function(){return _e.isInMemoryStorage||!0===_e.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){_e.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=wt(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(it(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=bt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=ze(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),gn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[pn,mn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=mn&&mn.isAvailable(),o=i&&!mn.previouslyFailed();if(e.webSocketOnly&&(i||De("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[mn];else{var a=this.transports_=[];try{for(var s=Z(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),yn=function(){function t(t,e,n,r,i,o,a,s,u,l){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pe("c:"+this.id+":"),this.transportManager_=new gn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Je((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Ue("t",t),n=Ue("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Ue("t",t),n=Ue("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Ue("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Oe("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oe("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&De("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Je((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Je((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_e.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),wn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),bn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},it(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=et([],tt(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){it(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),_n=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ft()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return it("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(bn),In=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kn(){return new In("")}function Cn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Tn(t){return t.pieces_.length-t.pieceNum_}function En(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new In(t.pieces_,e)}function Sn(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Nn(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function xn(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new In(e,0)}function An(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof In)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new In(n,0)}function Pn(t){return t.pieceNum_>=t.pieces_.length}function On(t,e){var n=Cn(t),r=Cn(e);if(null===n)return e;if(n===r)return On(En(t),En(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Rn(t,e){for(var n=Nn(t,0),r=Nn(e,0),i=0;i<n.length&&i<r.length;i++){var o=je(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Dn(t,e){if(Tn(t)!==Tn(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qn(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Tn(t)>Tn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ln=function(t,e){this.errorPrefix_=e,this.parts_=Nn(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Dt(this.parts_[n]);Mn(this)};function Mn(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jn(t))}function jn(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fn,Un,Vn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return it("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(bn),zn=1e3,Wn=function(t){function e(n,r,i,o,a,s,u,l){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=e.nextPersistentConnectionId_++,c.log_=Pe("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=zn,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!dt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Vn.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&_n.getInstance().on("online",c.onOnline_,c),c}return Y(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(bt(i)),it(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new ht,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),it(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),it(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&It(t,"w")){var n=kt(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();De("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=_t(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=_t(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),it(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+bt(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Oe("Unrecognized action received from server: "+bt(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;it(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=zn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zn),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Q(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,h,f,p,d,v=this;return X(this,(function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},l=function(t){it(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:u,sendRequest:l},c=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)])];case 2:return h=tt.apply(void 0,[m.sent(),2]),f=h[0],p=h[1],a?Ae("getToken() completed but was canceled"):(Ae("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,s=new yn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){De(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=m.sent(),this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&De(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){Ae("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Ae("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Ct(this.interruptReasons_)&&(this.reconnectDelay_=zn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Ve(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new In(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Ae("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){Ae("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Z(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Z(a.values())),u=s.next();!u.done;u=s.next()){var l=u.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+ve.replace(/\./g,"-")]=1,ft()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=_n.getInstance().currentlyOnline();return Ct(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(wn),Bn=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Hn=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Bn(Le,t),r=new Bn(Le,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Bn.MIN},t}(),$n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Fn},set:function(t){Fn=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return je(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw ot("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Bn.MIN},e.prototype.maxPost=function(){return new Bn(Me,Fn)},e.prototype.makePost=function(t,e){return it("string"==typeof t,"KeyIndex indexValue must always be a string."),new Bn(t,Fn)},e.prototype.toString=function(){return".key"},e}(Hn),Kn=new $n,Gn=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Yn=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Qn.EMPTY_NODE,this.right=null!=o?o:Qn.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Qn.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Qn.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Jn=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Yn(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Qn=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Yn.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yn.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Gn(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Gn(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Gn(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Gn(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Jn,t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Xn(t,e){return je(t.name,e.name)}function Zn(t,e){return je(t,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tr,er,nr,rr=function(t){return"number"==typeof t?"number:"+Be(t):"string:"+t},ir=function(t){if(t.isLeafNode()){var e=t.val();it("string"==typeof e||"number"==typeof e||"object"==typeof e&&It(e,".sv"),"Priority must be a string or number.")}else it(t===Un||t.isEmpty(),"priority of unexpected type.");it(t===Un||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},or=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,it(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ir(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return tr},set:function(t){tr=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Pn(e)?this:".priority"===Cn(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=Cn(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(it(".priority"!==r||1===Tn(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(En(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+rr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Be(this.value_):this.value_,this.lazyHash_=Te(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(it(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return it(i>=0,"Unknown leaf type: "+n),it(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var ar,sr,ur=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?je(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Bn.MIN},e.prototype.maxPost=function(){return new Bn(Me,new or("[PRIORITY-POST]",nr))},e.prototype.makePost=function(t,e){var n=er(t);return new Bn(e,new or("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Hn)),lr=Math.log(2),cr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/lr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),hr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Yn(a,o.node,Yn.BLACK,null,null);var u=parseInt(s/2,10)+e,l=i(e,u),c=i(u+1,r);return o=t[u],a=n?n(o):o,new Yn(a,o.node,Yn.BLACK,l,c)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var l=i(o+1,s),c=t[o],h=n?n(c):c;u(new Yn(h,c.node,r,null,l))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},l=0;l<e.count;++l){var c=e.nextBitIsOne(),h=Math.pow(2,e.count-(l+1));c?s(h,Yn.BLACK):(s(h,Yn.BLACK),s(h,Yn.RED))}return o}(new cr(t.length));return new Qn(r||e,o)},fr={},pr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return it(fr&&ur,"ChildrenNode.ts has not been loaded"),ar=ar||new t({".priority":fr},{".priority":ur})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=kt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qn?e:null},t.prototype.hasIndex=function(t){return It(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){it(e!==Kn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Bn.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?hr(i,e.getCompare()):fr;var u=e.toString(),l=J({},this.indexSet_);l[u]=e;var c=J({},this.indexes_);return c[u]=r,new t(c,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Tt(this.indexes_,(function(t,i){var o=kt(r.indexSet_,i);if(it(o,"Missing index implementation for "+i),t===fr){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Bn.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),hr(a,o.getCompare())}return fr}var l=n.get(e.name),c=t;return l&&(c=c.remove(new Bn(e.name,l))),c.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Tt(this.indexes_,(function(t){if(t===fr)return t;var r=n.get(e.name);return r?t.remove(new Bn(e.name,r)):t})),this.indexSet_)},t}(),dr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ir(this.priorityNode_),this.children_.isEmpty()&&it(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return sr||(sr=new t(new Qn(Zn),null,pr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||sr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?sr:e},t.prototype.getChild=function(t){var e=Cn(t);return null===e?this:this.getImmediateChild(e).getChild(En(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(it(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Bn(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?sr:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=Cn(t);if(null===n)return e;it(".priority"!==Cn(t)||1===Tn(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(En(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ur,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+rr(this.getPriority().val())+":"),this.forEachChild(ur,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Te(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bn(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Bn(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Bn(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Bn.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Bn.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vr?-1:0},t.prototype.withIndex=function(e){if(e===Kn||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Kn||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(ur),r=e.getIterator(ur),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Kn?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),vr=new(function(t){function e(){return t.call(this,new Qn(Zn),dr.EMPTY_NODE,pr.Default)||this}return Y(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return dr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(dr));Object.defineProperties(Bn,{MIN:{value:new Bn(Le,dr.EMPTY_NODE)},MAX:{value:new Bn(Me,vr)}}),$n.__EMPTY_NODE=dr.EMPTY_NODE,or.__childrenNodeConstructor=dr,Un=vr,function(t){nr=t}(vr);function mr(t,e){if(void 0===e&&(e=null),null===t)return dr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),it(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new or(t,mr(e));if(t instanceof Array){var n=dr.EMPTY_NODE;return We(t,(function(e,r){if(It(t,e)&&"."!==e.substring(0,1)){var i=mr(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(mr(e))}var r=[],i=!1;if(We(t,(function(t,e){if("."!==t.substring(0,1)){var n=mr(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Bn(t,n)))}})),0===r.length)return dr.EMPTY_NODE;var o=hr(r,Xn,(function(t){return t.name}),Zn);if(i){var a=hr(r,ur.getCompare());return new dr(o,mr(e),new pr({".priority":a},{".priority":ur}))}return new dr(o,mr(e),pr.Default)}!function(t){er=t}(mr);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var gr,yr,wr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,it(!Pn(e)&&".priority"!==Cn(e),"Can't create PathIndex with empty path or .priority key"),n}return Y(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?je(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=mr(t),r=dr.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bn(e,r)},e.prototype.maxPost=function(){var t=dr.EMPTY_NODE.updateChild(this.indexPath_,vr);return new Bn(Me,t)},e.prototype.toString=function(){return Nn(this.indexPath_,0).join("/")},e}(Hn),br=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?je(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Bn.MIN},e.prototype.maxPost=function(){return Bn.MAX},e.prototype.makePost=function(t,e){var n=mr(t);return new Bn(e,n)},e.prototype.toString=function(){return".value"},e}(Hn)),_r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ir=(gr=0,yr=[],function(t){var e,n=t===gr;gr=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=_r.charAt(t%64),t=Math.floor(t/64);it(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===yr[e];e--)yr[e]=0;yr[e]++}else for(e=0;e<12;e++)yr[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=_r.charAt(yr[e]);return it(20===i.length,"nextPushId: Length should be 20."),i}),kr=function(t){if("2147483647"===t)return"-";var e=Ge(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Me;var o=n[i],a=_r.charAt(_r.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Cr=function(t){if("-2147483648"===t)return Le;var e=Ge(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=_r.charAt(_r.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Tr(t){return{type:"value",snapshotNode:t}}function Er(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Sr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Nr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xr=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){it(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Sr(e,a)):it(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Er(e,n)):o.trackChildChange(Nr(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ur,(function(t,r){e.hasChild(t)||n.trackChildChange(Sr(t,r))})),e.isLeafNode()||e.forEachChild(ur,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Nr(e,r,i))}else n.trackChildChange(Er(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?dr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ar=function(){function t(e){this.indexedFilter_=new xr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Bn(e,n))||(n=dr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=dr.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(dr.EMPTY_NODE);var i=this;return e.forEachChild(ur,(function(t,e){i.matches(new Bn(t,e))||(r=r.updateImmediateChild(t,dr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Pr=function(){function t(t){this.rangedFilter_=new Ar(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Bn(e,n))||(n=dr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=dr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=dr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(dr.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(t,e){return c(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,dr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;it(s.numChildren()===this.limit_,"");var u=new Bn(e,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(c&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Nr(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Sr(e,h));var d=s.updateImmediateChild(e,dr.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Er(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(Sr(l.name,l.node)),i.trackChildChange(Er(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(l.name,dr.EMPTY_NODE)):t},t}(),Or=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return it(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return it(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Le},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return it(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return it(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Me},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return it(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ur},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rr(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Dr(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function qr(t,e){var n=t.copy();return n.index_=e,n}function Lr(t){var e,n={};return t.isDefault()||(t.index_===ur?e="$priority":t.index_===br?e="$value":t.index_===Kn?e="$key":(it(t.index_ instanceof wr,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=bt(e),t.startSet_&&(n.startAt=bt(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+bt(t.indexStartName_))),t.endSet_&&(n.endAt=bt(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+bt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Mr(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ur&&(e.i=t.index_.toString()),e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jr=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=Pe("p:rest:"),o.listens_={},o}return Y(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(it(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var l=Lr(t._queryParams);this.restRequest_(a+".json",l,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),kt(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Lr(t._queryParams),r=t._path.toString(),i=new ht;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=tt(i,2),a=o[0],s=o[1];a&&a.accessToken&&(e.auth=a.accessToken),s&&s.token&&(e.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=wt(l.responseText)}catch(t){De("Failed to parse JSON response for "+u+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&De("Got unsuccessful REST response for "+u+" Status: "+l.status),n(l.status);n=null}},l.open("GET",u,!0),l.send()}))},e}(wn),Fr=function(){function t(){this.rootNode_=dr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ur(){return{value:null,children:new Map}}function Vr(t,e,n){if(Pn(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=Cn(e);t.children.has(r)||t.children.set(r,Ur()),Vr(t.children.get(r),e=En(e),n)}}function zr(t,e){if(Pn(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(ur,(function(e,n){Vr(t,new In(e),n)})),zr(t,e)}if(t.children.size>0){var r=Cn(e);if(e=En(e),t.children.has(r))zr(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Wr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,(function(t,r){Wr(r,new In(e.toString()+"/"+t),n)}))}var Br,Hr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=J({},t);return this.last_&&We(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),$r=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Hr(t);var n=1e4+2e4*Math.random();Je(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;We(e,(function(e,i){i>0&&It(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Je(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kr(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Br||(Br={}));var Gr,Yr=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Br.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Pn(this.path)){if(null!=this.affectedTree.value)return it(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new In(e));return new t(kn(),n,this.revert)}return it(Cn(this.path)===e,"operationForChild called for unrelated child."),new t(En(this.path),this.affectedTree,this.revert)},t}(),Jr=function(){function t(t,e){this.source=t,this.path=e,this.type=Br.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Pn(this.path)?new t(this.source,kn()):new t(this.source,En(this.path))},t}(),Qr=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Br.OVERWRITE}return t.prototype.operationForChild=function(e){return Pn(this.path)?new t(this.source,kn(),this.snap.getImmediateChild(e)):new t(this.source,En(this.path),this.snap)},t}(),Xr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Br.MERGE}return t.prototype.operationForChild=function(e){if(Pn(this.path)){var n=this.children.subtree(new In(e));return n.isEmpty()?null:n.value?new Qr(this.source,kn(),n.value):new t(this.source,kn(),n)}return it(Cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,En(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Zr=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Pn(t))return this.isFullyInitialized()&&!this.filtered_;var e=Cn(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ti=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ei(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw ot("Should only compare child_ events.");var r=new Bn(e.childName,e.snapshotNode),i=new Bn(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function ni(t,e){return{eventCache:t,serverCache:e}}function ri(t,e,n,r){return ni(new Zr(e,n,r),t.serverCache)}function ii(t,e,n,r){return ni(t.eventCache,new Zr(e,n,r))}function oi(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ai(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var si=function(){function t(t,e){void 0===e&&(Gr||(Gr=new Qn(Fe)),e=Gr),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return We(e,(function(t,e){n=n.set(new In(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:kn(),value:this.value};if(Pn(t))return null;var n=Cn(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(En(t),e);return null!=i?{path:An(new In(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Pn(e))return this;var n=Cn(e),r=this.children.get(n);return null!==r?r.subtree(En(e)):new t(null)},t.prototype.set=function(e,n){if(Pn(e))return new t(n,this.children);var r=Cn(e),i=(this.children.get(r)||new t(null)).set(En(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Pn(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=Cn(e),r=this.children.get(n);if(r){var i=r.remove(En(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Pn(t))return this.value;var e=Cn(t),n=this.children.get(e);return n?n.get(En(t)):null},t.prototype.setTree=function(e,n){if(Pn(e))return n;var r=Cn(e),i=(this.children.get(r)||new t(null)).setTree(En(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(kn(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(An(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,kn(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Pn(t))return null;var i=Cn(t),o=this.children.get(i);return o?o.findOnPath_(En(t),An(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,kn(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Pn(e))return this;this.value&&r(n,this.value);var i=Cn(e),o=this.children.get(i);return o?o.foreachOnPath_(En(e),An(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(kn(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(An(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),ui=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new si(null))},t}();function li(t,e,n){if(Pn(e))return new ui(new si(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=On(i,e);return o=o.updateChild(a,n),new ui(t.writeTree_.set(i,o))}var s=new si(n),u=t.writeTree_.setTree(e,s);return new ui(u)}function ci(t,e,n){var r=t;return We(n,(function(t,n){r=li(r,An(e,t),n)})),r}function hi(t,e){if(Pn(e))return ui.empty();var n=t.writeTree_.setTree(e,new si(null));return new ui(n)}function fi(t,e){return null!=pi(t,e)}function pi(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(On(n.path,e)):null}function di(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ur,(function(t,n){e.push(new Bn(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Bn(t,n.value))})),e}function vi(t,e){if(Pn(e))return t;var n=pi(t,e);return new ui(null!=n?new si(n):t.writeTree_.subtree(e))}function mi(t){return t.writeTree_.isEmpty()}function gi(t,e){return yi(kn(),t.writeTree_,e)}function yi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(it(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=yi(An(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(An(t,".priority"),r)),n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wi(t,e){return Oi(e,t)}function bi(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));it(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&_i(s,r.path)?i=!1:qn(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(t){t.visibleWrites=ki(t.allWrites,Ii,kn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=hi(t.visibleWrites,r.path):We(r.children,(function(e){t.visibleWrites=hi(t.visibleWrites,An(r.path,e))}));return!0}return!1}function _i(t,e){if(t.snap)return qn(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&qn(An(t.path,n),e))return!0;return!1}function Ii(t){return t.visible}function ki(t,e,n){for(var r=ui.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)qn(n,a)?r=li(r,s=On(n,a),o.snap):qn(a,n)&&(s=On(a,n),r=li(r,kn(),o.snap.getChild(s)));else{if(!o.children)throw ot("WriteRecord should have .snap or .children");if(qn(n,a))r=ci(r,s=On(n,a),o.children);else if(qn(a,n))if(Pn(s=On(a,n)))r=ci(r,kn(),o.children);else{var u=kt(o.children,Cn(s));if(u){var l=u.getChild(En(s));r=li(r,kn(),l)}}}}}return r}function Ci(t,e,n,r,i){if(r||i){var o=vi(t.visibleWrites,e);if(!i&&mi(o))return n;if(i||null!=n||fi(o,kn())){return gi(ki(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(qn(t.path,e)||qn(e,t.path))}),e),n||dr.EMPTY_NODE)}return null}var a=pi(t.visibleWrites,e);if(null!=a)return a;var s=vi(t.visibleWrites,e);return mi(s)?n:null!=n||fi(s,kn())?gi(s,n||dr.EMPTY_NODE):null}function Ti(t,e,n,r){return Ci(t.writeTree,t.treePath,e,n,r)}function Ei(t,e){return function(t,e,n){var r=dr.EMPTY_NODE,i=pi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=vi(t.visibleWrites,e);return n.forEachChild(ur,(function(t,e){var n=gi(vi(o,new In(t)),e);r=r.updateImmediateChild(t,n)})),di(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return di(vi(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Si(t,e,n,r){return function(t,e,n,r,i){it(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=An(e,n);if(fi(t.visibleWrites,o))return null;var a=vi(t.visibleWrites,o);return mi(a)?i.getChild(n):gi(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function Ni(t,e){return function(t,e){return pi(t.visibleWrites,e)}(t.writeTree,An(t.treePath,e))}function xi(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=vi(t.visibleWrites,e),l=pi(u,kn());if(null!=l)s=l;else{if(null==n)return[];s=gi(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&c.length<i;)0!==h(p,r)&&c.push(p),p=f.getNext();return c}(t.writeTree,t.treePath,e,n,r,i,o)}function Ai(t,e,n){return function(t,e,n,r){var i=An(e,n),o=pi(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?gi(vi(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Pi(t,e){return Oi(An(t.treePath,e),t.writeTree)}function Oi(t,e){return{treePath:t,writeTree:e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ri=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;it("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),it(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Nr(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Sr(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Er(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw ot("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Nr(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Di=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),qi=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Zr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ai(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ai(this.viewCache_),i=xi(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Li(t,e,n,r,i){var o,a,s=new Ri;if(n.type===Br.OVERWRITE){var u=n;u.source.fromUser?o=Fi(t,e,u.path,u.snap,r,i,s):(it(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Pn(u.path),o=ji(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Br.MERGE){var l=n;l.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var l=An(n,r);Ui(e,Cn(l))&&(s=Fi(t,s,l,u,i,o,a))})),r.foreach((function(r,u){var l=An(n,r);Ui(e,Cn(l))||(s=Fi(t,s,l,u,i,o,a))})),s}(t,e,l.path,l.children,r,i,s):(it(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=zi(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Br.ACK_USER_WRITE){var c=n;o=c.revert?function(t,e,n,r,i,o){var a;if(null!=Ni(r,n))return e;var s=new qi(r,e,i),u=e.eventCache.getNode(),l=void 0;if(Pn(n)||".priority"===Cn(n)){var c=void 0;if(e.serverCache.isFullyInitialized())c=Ti(r,ai(e));else{var h=e.serverCache.getNode();it(h instanceof dr,"serverChildren would be complete if leaf node"),c=Ei(r,h)}c=c,l=t.filter.updateFullNode(u,c,o)}else{var f=Cn(n),p=Ai(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(u,f,p,En(n),s,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,dr.EMPTY_NODE,En(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Ti(r,ai(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,o))}return a=e.serverCache.isFullyInitialized()||null!=Ni(r,kn()),ri(e,l,a,t.filter.filtersNodes())}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,c.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=Ni(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Pn(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ji(t,e,n,u.getNode().getChild(n),i,o,s,a);if(Pn(n)){var l=new si(null);return u.getNode().forEachChild(Kn,(function(t,e){l=l.set(new In(t),e)})),zi(t,e,n,l,i,o,s,a)}return e}var c=new si(null);return r.foreach((function(t,e){var r=An(n,t);u.isCompleteForPath(r)&&(c=c.set(t,u.getNode().getChild(r)))})),zi(t,e,n,c,i,o,s,a)}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Br.LISTEN_COMPLETE)throw ot("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,a=ii(e,o.getNode(),o.isFullyInitialized()||Pn(n),o.isFiltered());return Mi(t,a,n,r,Di,i)}(t,e,n.path,r,s)}var h=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=oi(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Tr(oi(e)))}}(e,o,h),{viewCache:o,changes:h}}function Mi(t,e,n,r,i,o){var a=e.eventCache;if(null!=Ni(r,n))return e;var s=void 0,u=void 0;if(Pn(n))if(it(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=ai(e),c=Ei(r,l instanceof dr?l:dr.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{var h=Ti(r,ai(e));s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=Cn(n);if(".priority"===f){it(1===Tn(n),"Can't have a priority with additional path components");var p=a.getNode(),d=Si(r,n,p,u=e.serverCache.getNode());s=null!=d?t.filter.updatePriority(p,d):a.getNode()}else{var v=En(n),m=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var g=Si(r,n,a.getNode(),u);m=null!=g?a.getNode().getImmediateChild(f).updateChild(v,g):a.getNode().getImmediateChild(f)}else m=Ai(r,f,e.serverCache);s=null!=m?t.filter.updateChild(a.getNode(),f,m,v,i,o):a.getNode()}}return ri(e,s,a.isFullyInitialized()||Pn(n),t.filter.filtersNodes())}function ji(t,e,n,r,i,o,a,s){var u,l=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(Pn(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Cn(n);if(!l.isCompleteForPath(n)&&Tn(n)>1)return e;var p=En(n),d=l.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?c.updatePriority(l.getNode(),d):c.updateChild(l.getNode(),f,d,p,Di,null)}var v=ii(e,u,l.isFullyInitialized()||Pn(n),c.filtersNodes());return Mi(t,v,n,i,new qi(i,v,o),s)}function Fi(t,e,n,r,i,o,a){var s,u,l=e.eventCache,c=new qi(i,e,o);if(Pn(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=ri(e,u,!0,t.filter.filtersNodes());else{var h=Cn(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=ri(e,u,l.isFullyInitialized(),l.isFiltered());else{var f=En(n),p=l.getNode().getImmediateChild(h),d=void 0;if(Pn(f))d=r;else{var v=c.getCompleteChild(h);d=null!=v?".priority"===Sn(f)&&v.getChild(xn(f)).isEmpty()?v:v.updateChild(f,r):dr.EMPTY_NODE}if(p.equals(d))s=e;else s=ri(e,t.filter.updateChild(l.getNode(),h,d,f,c,a),l.isFullyInitialized(),t.filter.filtersNodes())}}return s}function Ui(t,e){return t.eventCache.isCompleteForChild(e)}function Vi(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function zi(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,l=e;u=Pn(n)?r:new si(null).setTree(n,r);var c=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Vi(0,e.serverCache.getNode().getImmediateChild(n),r);l=ji(t,l,new In(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=Vi(0,e.serverCache.getNode().getImmediateChild(n),r);l=ji(t,l,new In(n),h,i,o,a,s)}})),l}var Wi,Bi=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new xr(r.getIndex()),o=(n=r).loadsAllData()?new xr(n.getIndex()):n.hasLimit()?new Pr(n):new Ar(n);this.processor_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(dr.EMPTY_NODE,a.getNode(),null),l=o.updateFullNode(dr.EMPTY_NODE,s.getNode(),null),c=new Zr(u,a.isFullyInitialized(),i.filtersNodes()),h=new Zr(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ni(h,c),this.eventGenerator_=new ti(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Hi(t,e){var n=ai(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Pn(e)&&!n.getImmediateChild(Cn(e)).isEmpty())?n.getChild(e):null}function $i(t){return 0===t.eventRegistrations_.length}function Ki(t,e,n){var r=[];if(n){it(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function Gi(t,e,n,r){e.type===Br.MERGE&&null!==e.source.queryId&&(it(ai(t.viewCache_),"We should always have a full cache before handling merges"),it(oi(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=Li(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,it(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),it(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),it(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Yi(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Yi(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),ei(t,i,"child_removed",e,r,n),ei(t,i,"child_added",e,r,n),ei(t,i,"child_moved",o,r,n),ei(t,i,"child_changed",e,r,n),ei(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ji,Qi=function(){this.views=new Map};function Xi(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return it(null!=s,"SyncTree gave us an op for an invalid query."),Gi(s,e,n,r)}var u=[];try{for(var l=Z(t.views.values()),c=l.next();!c.done;c=l.next()){s=c.value;u=u.concat(Gi(s,e,n,r))}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return u}function Zi(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=Ti(n,i?r:null),u=!1;s?u=!0:r instanceof dr?(s=Ei(n,r),u=!1):(s=dr.EMPTY_NODE,u=!1);var l=ni(new Zr(s,u,!1),new Zr(r,i,!1));return new Bi(e,l)}return a}function to(t,e,n,r,i,o){var a=Zi(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ur,(function(t,e){r.push(Er(t,e))})),n.isFullyInitialized()&&r.push(Tr(n.getNode())),Yi(t,r,n.getNode(),e)}(a,n)}function eo(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],l=ao(t);if("default"===a)try{for(var c=Z(t.views.entries()),h=c.next();!h.done;h=c.next()){var f=tt(h.value,2),p=f[0],d=f[1];u=u.concat(Ki(d,n,r)),$i(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(Ki(d,n,r)),$i(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return l&&!ao(t)&&s.push(new(it(Wi,"Reference.ts has not been loaded"),Wi)(e._repo,e._path)),{removed:s,events:u}}function no(t){var e,n,r=[];try{for(var i=Z(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function ro(t,e){var n,r,i=null;try{for(var o=Z(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Hi(s,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function io(t,e){if(e._queryParams.loadsAllData())return so(t);var n=e._queryIdentifier;return t.views.get(n)}function oo(t,e){return null!=io(t,e)}function ao(t){return null!=so(t)}function so(t){var e,n;try{for(var r=Z(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uo=1,lo=function(t){this.listenProvider_=t,this.syncPointTree_=new si(null),this.pendingWriteTree_={visibleWrites:ui.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function co(t,e,n,r,i){return function(t,e,n,r,i){it(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=li(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?wo(t,new Qr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function ho(t,e,n,r){!function(t,e,n,r){it(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=ci(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=si.fromObject(n);return wo(t,new Xr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function fo(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(bi(t.pendingWriteTree_,e)){var i=new si(null);return null!=r.snap?i=i.set(kn(),!0):We(r.children,(function(t){i=i.set(new In(t),!0)})),wo(t,new Yr(r.path,i,n))}return[]}function po(t,e,n){return wo(t,new Qr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function vo(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||oo(o,e))){var s=eo(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var l=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),c=t.syncPointTree_.findOnPath(i,(function(t,e){return ao(e)}));if(l&&!c){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&ao(e))return[so(e)];var r=[];return e&&(r=no(e)),We(n,(function(t,e){r=r.concat(e)})),r}))}(h),p=0;p<f.length;++p){var d=f[p],v=d.query,m=Io(t,d);t.listenProvider_.startListening(No(v),ko(t,v),m.hashFn,m.onComplete)}}if(!c&&u.length>0&&!r)if(l){t.listenProvider_.stopListening(No(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Co(e));t.listenProvider_.stopListening(No(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Co(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function mo(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=On(t,r);i=i||ro(e,n),o=o||ao(e)}));var a,s=t.syncPointTree_.get(r);(s?(o=o||ao(s),i=i||ro(s,kn())):(s=new Qi,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=dr.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=ro(e,kn());n&&(i=i.updateImmediateChild(t,n))})));var u=oo(s,e);if(!u&&!e._queryParams.loadsAllData()){var l=Co(e);it(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var c=uo++;t.queryToTagMap.set(l,c),t.tagToQueryMap.set(c,l)}var h=to(s,e,n,wi(t.pendingWriteTree_,r),i,a);if(!u&&!o){var f=io(s,e);h=h.concat(function(t,e,n){var r=e._path,i=ko(t,e),o=Io(t,n),a=t.listenProvider_.startListening(No(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)it(!ao(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!Pn(t)&&e&&ao(e))return[so(e).query];var r=[];return e&&(r=r.concat(no(e).map((function(t){return t.query})))),We(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<u.length;++l){var c=u[l];t.listenProvider_.stopListening(No(c),ko(t,c))}return a}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e,f))}return h}function go(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=ro(n,On(t,e));if(r)return r}));return Ci(r,e,i,n,!0)}function yo(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=On(t,n);r=r||ro(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||ro(i,kn()):(i=new Qi,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Zr(r,!0,!1):null;return function(t){return oi(t.viewCache_)}(Zi(i,e,wi(t.pendingWriteTree_,e._path),o?a.getNode():dr.EMPTY_NODE,o))}function wo(t,e){return bo(e,t.syncPointTree_,null,wi(t.pendingWriteTree_,kn()))}function bo(t,e,n,r){if(Pn(t.path))return _o(t,e,n,r);var i=e.get(kn());null==n&&null!=i&&(n=ro(i,kn()));var o=[],a=Cn(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=Pi(r,a);o=o.concat(bo(s,u,l,c))}return i&&(o=o.concat(Xi(i,t,r,n))),o}function _o(t,e,n,r){var i=e.get(kn());null==n&&null!=i&&(n=ro(i,kn()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=Pi(r,e),u=t.operationForChild(e);u&&(o=o.concat(_o(u,i,a,s)))})),i&&(o=o.concat(Xi(i,t,r,n))),o}function Io(t,e){var n=e.query,r=ko(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||dr.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=To(t,n);if(r){var i=Eo(r),o=i.path,a=i.queryId,s=On(o,e);return So(t,o,new Jr(Kr(a),s))}return[]}(t,n._path,r):function(t,e){return wo(t,new Jr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return vo(t,n,null,i)}}}function ko(t,e){var n=Co(e);return t.queryToTagMap.get(n)}function Co(t){return t._path.toString()+"$"+t._queryIdentifier}function To(t,e){return t.tagToQueryMap.get(e)}function Eo(t){var e=t.indexOf("$");return it(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new In(t.substr(0,e))}}function So(t,e,n){var r=t.syncPointTree_.get(e);return it(r,"Missing sync point for query tag that we're tracking"),Xi(r,n,wi(t.pendingWriteTree_,e),null)}function No(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(it(Ji,"Reference.ts has not been loaded"),Ji)(t._repo,t._path):t}var xo=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Ao=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=An(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return go(this.syncTree_,this.path_)},t}(),Po=function(t,e,n){return t&&"object"==typeof t?(it(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Oo(t[".sv"],e,n):"object"==typeof t[".sv"]?Ro(t[".sv"],e):void it(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Oo=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:it(!1,"Unexpected server value: "+t)}},Ro=function(t,e,n){t.hasOwnProperty("increment")||it(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&it(!1,"Unexpected increment value: "+r);var i=e.node();if(it(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Do=function(t,e,n,r){return Lo(e,new Ao(n,t),r)},qo=function(t,e,n){return Lo(t,new xo(e),n)};function Lo(t,e,n){var r,i=t.getPriority().val(),o=Po(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Po(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new or(s,mr(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new or(o))),u.forEachChild(ur,(function(t,i){var o=Lo(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mo=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function jo(t,e){for(var n=e instanceof In?e:new In(e),r=t,i=Cn(n);null!==i;){var o=kt(r.node.children,i)||{children:{},childCount:0};r=new Mo(i,r,o),i=Cn(n=En(n))}return r}function Fo(t){return t.node.value}function Uo(t,e){t.node.value=e,Ho(t)}function Vo(t){return t.node.childCount>0}function zo(t,e){We(t.node.children,(function(n,r){e(new Mo(n,t,r))}))}function Wo(t,e,n,r){n&&!r&&e(t),zo(t,(function(t){Wo(t,e,!0,r)})),n&&r&&e(t)}function Bo(t){return new In(null===t.parent?t.name:Bo(t.parent)+"/"+t.name)}function Ho(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Fo(t)&&!Vo(t)}(n),i=It(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ho(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ho(t))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t.parent,t.name,t)}var $o=/[\[\].#$\/\u0000-\u001F\u007F]/,Ko=/[\[\].#$\u0000-\u001F\u007F]/,Go=10485760,Yo=function(t){return"string"==typeof t&&0!==t.length&&!$o.test(t)},Jo=function(t){return"string"==typeof t&&0!==t.length&&!Ko.test(t)},Qo=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!qe(t)||t&&"object"==typeof t&&It(t,".sv")},Xo=function(t,e,n,r){r&&void 0===e||Zo(Pt(t,"value"),e,n)},Zo=function(t,e,n){var r=n instanceof In?new Ln(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+jn(r));if("function"==typeof e)throw new Error(t+"contains a function "+jn(r)+" with contents = "+e.toString());if(qe(e))throw new Error(t+"contains "+e.toString()+" "+jn(r));if("string"==typeof e&&e.length>Go/3&&Dt(e)>Go)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+jn(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(We(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Yo(e)))throw new Error(t+" contains an invalid key ("+e+") "+jn(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Dt(e),Mn(t)}(r,e),Zo(t,n,r),s=(a=r).parts_.pop(),a.byteLength_-=Dt(s),a.parts_.length>0&&(a.byteLength_-=1)})),i&&o)throw new Error(t+' contains ".value" child '+jn(r)+" in addition to actual children.")}},ta=function(t,e,n,r){if(!r||void 0!==e){var i=Pt(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];We(e,(function(t,e){var r=new In(t);if(Zo(i,e,An(n,r)),".priority"===Sn(r)&&!Qo(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Nn(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Yo(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Rn);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&qn(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},ea=function(t,e,n){if(!n||void 0!==e){if(qe(e))throw new Error(Pt(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qo(e))throw new Error(Pt(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},na=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Pt(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ra=function(t,e,n,r){if(!(r&&void 0===n||Yo(n)))throw new Error(Pt(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ia=function(t,e,n,r){if(!(r&&void 0===n||Jo(n)))throw new Error(Pt(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oa=function(t,e){if(".info"===Cn(e))throw new Error(t+" failed = Can't modify data under /.info/")},aa=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Yo(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Jo(t)}(n))throw new Error(Pt(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},sa=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Pt(t,e)+"must be a boolean.")},ua=function(){this.eventLists_=[],this.recursionDepth_=0};function la(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Dn(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function ca(t,e,n){la(t,n),fa(t,(function(t){return Dn(t,e)}))}function ha(t,e,n){la(t,n),fa(t,(function(t){return qn(t,e)||qn(e,t)}))}function fa(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(pa(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function pa(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();Se&&Ae("event: "+n.toString()),Ye(r)}}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var da="repo_interrupt",va=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ua,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ur(),this.transactionQueueTree_=new Mo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ma(t,e,n){if(t.stats_=ln(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new jr(t.repoInfo_,(function(e,n,r,i){wa(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return ba(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Wn(t.repoInfo_,e,(function(e,n,r,i){wa(t,e,n,r,i)}),(function(e){ba(t,e)}),(function(e){!function(t,e){We(e,(function(e,n){_a(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new $r(t.stats_,t.server_)},o=r.toString(),un[o]||(un[o]=i()),un[o]),t.infoData_=new Fr,t.infoSyncTree_=new lo({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=po(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),_a(t,"connected",!1),t.serverSyncTree_=new lo({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);ha(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function ga(t){var e=t.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ya(t){return(e=(e={timestamp:ga(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function wa(t,e,n,r,i){t.dataUpdateCount++;var o=new In(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=Tt(n,(function(t){return mr(t)}));a=function(t,e,n,r){var i=To(t,r);if(i){var o=Eo(i),a=o.path,s=o.queryId,u=On(a,e),l=si.fromObject(n);return So(t,a,new Xr(Kr(s),u,l))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=mr(n);a=function(t,e,n,r){var i=To(t,r);if(null!=i){var o=Eo(i),a=o.path,s=o.queryId,u=On(a,e);return So(t,a,new Qr(Kr(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var l=Tt(n,(function(t){return mr(t)}));a=function(t,e,n){var r=si.fromObject(n);return wo(t,new Xr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,l)}else{var c=mr(n);a=po(t.serverSyncTree_,o,c)}var h=o;a.length>0&&(h=Oa(t,o)),ha(t.eventQueue_,h,a)}function ba(t,e){_a(t,"connected",e),!1===e&&function(t){Na(t,"onDisconnectEvents");var e=ya(t),n=Ur();Wr(t.onDisconnect_,kn(),(function(r,i){var o=Do(r,i,t.serverSyncTree_,e);Vr(n,r,o)}));var r=[];Wr(n,kn(),(function(e,n){r=r.concat(po(t.serverSyncTree_,e,n));var i=Ma(t,e);Oa(t,i)})),t.onDisconnect_=Ur(),ha(t.eventQueue_,kn(),r)}(t)}function _a(t,e,n){var r=new In("/.info/"+e),i=mr(n);t.infoData_.updateSnapshot(r,i);var o=po(t.infoSyncTree_,r,i);ha(t.eventQueue_,r,o)}function Ia(t){return t.nextWriteId_++}function ka(t,e,n,r,i){Na(t,"set",{path:e.toString(),value:n,priority:r});var o=ya(t),a=mr(n,r),s=go(t.serverSyncTree_,e),u=qo(a,s,o),l=Ia(t),c=co(t.serverSyncTree_,e,u,l,!0);la(t.eventQueue_,c),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||De("set at "+e+" failed: "+n);var a=fo(t.serverSyncTree_,l,!o);ha(t.eventQueue_,e,a),xa(t,i,n,r)}));var h=Ma(t,e);Oa(t,h),ha(t.eventQueue_,h,[])}function Ca(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&zr(t.onDisconnect_,e),xa(t,n,r,i)}))}function Ta(t,e,n,r){var i=mr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Vr(t.onDisconnect_,e,i),xa(t,r,n,o)}))}function Ea(t,e,n){var r;r=".info"===Cn(e._path)?vo(t.infoSyncTree_,e,n):vo(t.serverSyncTree_,e,n),ca(t.eventQueue_,e._path,r)}function Sa(t){t.persistentConnection_&&t.persistentConnection_.interrupt(da)}function Na(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ae.apply(void 0,et([r],tt(e)))}function xa(t,e,n,r){e&&Ye((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Aa(t,e,n){return go(t.serverSyncTree_,e,n)||dr.EMPTY_NODE}function Pa(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||La(t,e),Fo(e)){var n=Da(t,e);it(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Aa(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];it(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=On(e,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),h=e;t.server_.put(h.toString(),c,(function(r){Na(t,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(fo(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);La(t,jo(t.transactionQueueTree_,e)),Pa(t,t.transactionQueueTree_),ha(t.eventQueue_,e,i);for(s=0;s<o.length;s++)Ye(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{De("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Oa(t,e)}}),a)}(t,Bo(e),n)}else Vo(e)&&zo(e,(function(e){Pa(t,e)}))}function Oa(t,e){var n=Ra(t,e),r=Bo(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var s,u,l=e[a],c=On(n,l.path),h=!1;if(it(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,s=l.abortReason,i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,s="maxretry",i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0));else{var f=Aa(t,l.path,o);l.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){Zo("transaction failed: Data returned ",p,l.path);var d=mr(p);"object"==typeof p&&null!=p&&It(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=l.currentWriteId,m=ya(t),g=qo(d,f,m);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=g,l.currentWriteId=Ia(t),o.splice(o.indexOf(v),1),i=(i=i.concat(co(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally))).concat(fo(t.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(fo(t.serverSyncTree_,l.currentWriteId,!0))}ha(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,u=e[a].unwatcher,setTimeout(u,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))},s=0;s<e.length;s++)a(s);La(t,t.transactionQueueTree_);for(s=0;s<r.length;s++)Ye(r[s]);Pa(t,t.transactionQueueTree_)}(t,Da(t,n),r),r}function Ra(t,e){var n,r=t.transactionQueueTree_;for(n=Cn(e);null!==n&&void 0===Fo(r);)r=jo(r,n),n=Cn(e=En(e));return r}function Da(t,e){var n=[];return qa(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function qa(t,e,n){var r=Fo(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);zo(e,(function(e){qa(t,e,n)}))}function La(t,e){var n=Fo(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Uo(e,n.length>0?n:void 0)}zo(e,(function(e){La(t,e)}))}function Ma(t,e){var n=Bo(Ra(t,e)),r=jo(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){ja(t,e)})),ja(t,r),Wo(r,(function(e){ja(t,e)})),n}function ja(t,e){var n=Fo(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(it(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(it(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(fo(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Uo(e,void 0):n.length=o+1,ha(t.eventQueue_,Bo(e),i);for(a=0;a<r.length;a++)Ye(r[a])}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fa=function(t,e){var n=Ua(t),r=n.namespace;"firebase.com"===n.domain&&Re(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Re("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&De("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new rn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new In(n.pathString)}},Ua=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(s=t.substring(0,l-1),t=t.substring(l+2));var c=t.indexOf("/");-1===c&&(c=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Z(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):De("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(l=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Va=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())},t}(),za=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Wa=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return it(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ba=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new ht;return Ca(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){oa("OnDisconnect.remove",this._path);var t=new ht;return Ta(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){oa("OnDisconnect.set",this._path),Xo("OnDisconnect.set",t,this._path,!1);var e=new ht;return Ta(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){oa("OnDisconnect.setWithPriority",this._path),Xo("OnDisconnect.setWithPriority",t,this._path,!1),ea("OnDisconnect.setWithPriority",e,!1);var n=new ht;return function(t,e,n,r,i){var o=mr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Vr(t.onDisconnect_,e,o),xa(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){oa("OnDisconnect.update",this._path),ta("OnDisconnect.update",t,this._path,!1);var e=new ht;return function(t,e,n,r){if(Ct(n))return Ae("onDisconnect().update() called with empty data.  Don't do anything."),void xa(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&We(n,(function(n,r){var i=mr(r);Vr(t.onDisconnect_,An(e,n),i)})),xa(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Ha=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return Pn(this._path)?null:Sn(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ya(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Mr(this._queryParams),e=Ve(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Mr(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=qt(e))instanceof t))return!1;var n=this._repo===e._repo,r=Dn(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function $a(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ka(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Kn){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Le)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Me)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ur){if(null!=e&&!Qo(e)||null!=n&&!Qo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(it(t.getIndex()instanceof wr||t.getIndex()===br,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ga(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ya=function(t){function e(e,n){return t.call(this,e,n,new Or,!1)||this}return Y(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=xn(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ha),Ja=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new In(e),r=Za(this.ref,e);return new t(this._node.getChild(n),r,ur)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Za(n.ref,r),ur))}))},t.prototype.hasChild=function(t){var e=new In(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Qa(t,e){return(t=qt(t))._checkNotDeleted("ref"),void 0!==e?Za(t._root,e):t._root}function Xa(t,e){(t=qt(t))._checkNotDeleted("refFromURL");var n=Fa(e,t._repo.repoInfo_.nodeAdmin);aa("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||Re("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Qa(t,n.path.toString())}function Za(t,e){var n,r,i,o;return null===Cn((t=qt(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ia(n,r,i,o)):ia("child","path",e,!1),new Ya(t._repo,An(t._path,e))}function ts(t,e){t=qt(t),oa("push",t._path),Xo("push",e,t._path,!0);var n,r=ga(t._repo),i=Ir(r),o=Za(t,i),a=Za(t,i);return n=null!=e?ns(a,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function es(t){return oa("remove",t._path),ns(t,null)}function ns(t,e){t=qt(t),oa("set",t._path),Xo("set",e,t._path,!1);var n=new ht;return ka(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function rs(t,e){t=qt(t),oa("setPriority",t._path),ea("setPriority",e,!1);var n=new ht;return ka(t._repo,An(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function is(t,e,n){if(oa("setWithPriority",t._path),Xo("setWithPriority",e,t._path,!1),ea("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new ht;return ka(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function os(t,e){ta("update",e,t._path,!1);var n=new ht;return function(t,e,n,r){Na(t,"update",{path:e.toString(),value:n});var i=!0,o=ya(t),a={};if(We(n,(function(n,r){i=!1,a[n]=Do(An(e,n),mr(r),t.serverSyncTree_,o)})),i)Ae("update() called with empty data.  Don't do anything."),xa(0,r,"ok",void 0);else{var s=Ia(t),u=ho(t.serverSyncTree_,e,a,s);la(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||De("update at "+e+" failed: "+n);var a=fo(t.serverSyncTree_,s,!o),u=a.length>0?Oa(t,e):e;ha(t.eventQueue_,u,a),xa(0,r,n,i)})),We(n,(function(n){var r=Ma(t,An(e,n));Oa(t,r)})),ha(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function as(t){return function(t,e){var n=yo(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=mr(n).withIndex(e._queryParams.getIndex()),i=po(t.serverSyncTree_,e._path,r);return ca(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Na(t,"get for query "+bt(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=qt(t))._repo,t).then((function(e){return new Ja(e,new Ya(t._repo,t._path),t._queryParams.getIndex())}))}var ss=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Va("value",this,new Ja(t.snapshotNode,new Ya(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new za(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),us=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new za(this,t,e):null},t.prototype.createEvent=function(t,e){it(null!=t.childName,"Child events should have a childName.");var n=Za(new Ya(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Va(t.type,this,new Ja(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function ls(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Ea(t._repo,t,l),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Wa(n,o||void 0),l="value"===e?new ss(u):new us(e,u);return function(t,e,n){var r;r=".info"===Cn(e._path)?mo(t.infoSyncTree_,e,n):mo(t.serverSyncTree_,e,n),ca(t.eventQueue_,e._path,r)}(t._repo,t,l),function(){return Ea(t._repo,t,l)}}function cs(t,e,n,r){return ls(t,"value",e,n,r)}function hs(t,e,n,r){return ls(t,"child_added",e,n,r)}function fs(t,e,n,r){return ls(t,"child_changed",e,n,r)}function ps(t,e,n,r){return ls(t,"child_moved",e,n,r)}function ds(t,e,n,r){return ls(t,"child_removed",e,n,r)}function vs(t,e,n){var r=null,i=n?new Wa(n):null;"value"===e?r=new ss(i):e&&(r=new us(e,i)),Ea(t._repo,t,r)}var ms=function(){},gs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Y(e,t),e.prototype._apply=function(t){Xo("endAt",this._value,t._path,!0);var e=Dr(t._queryParams,this._value,this._key);if(Ga(e),Ka(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ha(t._repo,t._path,e,t._orderByCalled)},e}(ms);function ys(t,e){return ra("endAt","key",e,!0),new gs(t,e)}var ws=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Y(e,t),e.prototype._apply=function(t){Xo("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Kn?("string"==typeof n&&(n=Cr(n)),i=Dr(e,n,r)):i=Dr(e,n,null==r?Le:Cr(r)),i.endBeforeSet_=!0,i);if(Ga(o),Ka(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ha(t._repo,t._path,o,t._orderByCalled)},e}(ms);function bs(t,e){return ra("endBefore","key",e,!0),new ws(t,e)}var _s=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Y(e,t),e.prototype._apply=function(t){Xo("startAt",this._value,t._path,!0);var e=Rr(t._queryParams,this._value,this._key);if(Ga(e),Ka(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ha(t._repo,t._path,e,t._orderByCalled)},e}(ms);function Is(t,e){return void 0===t&&(t=null),ra("startAt","key",e,!0),new _s(t,e)}var ks=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Y(e,t),e.prototype._apply=function(t){Xo("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Kn?("string"==typeof e&&(e=kr(e)),r=Rr(t,e,n)):r=Rr(t,e,null==n?Me:kr(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ga(e),Ka(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ha(t._repo,t._path,e,t._orderByCalled)},e}(ms);function Cs(t,e){return ra("startAfter","key",e,!0),new ks(t,e)}var Ts=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Y(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ha(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(ms);function Es(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ts(t)}var Ss=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Y(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ha(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(ms);function Ns(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ss(t)}var xs=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Y(e,t),e.prototype._apply=function(t){$a(t,"orderByChild");var e=new In(this._path);if(Pn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new wr(e),r=qr(t._queryParams,n);return Ka(r),new Ha(t._repo,t._path,r,!0)},e}(ms);function As(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ia("orderByChild","path",t,!1),new xs(t)}var Ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype._apply=function(t){$a(t,"orderByKey");var e=qr(t._queryParams,Kn);return Ka(e),new Ha(t._repo,t._path,e,!0)},e}(ms);function Os(){return new Ps}var Rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype._apply=function(t){$a(t,"orderByPriority");var e=qr(t._queryParams,ur);return Ka(e),new Ha(t._repo,t._path,e,!0)},e}(ms);function Ds(){return new Rs}var qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e.prototype._apply=function(t){$a(t,"orderByValue");var e=qr(t._queryParams,br);return Ka(e),new Ha(t._repo,t._path,e,!0)},e}(ms);function Ls(){return new qs}var Ms=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Y(e,t),e.prototype._apply=function(t){if(Xo("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new gs(this._value,this._key)._apply(new _s(this._value,this._key)._apply(t))},e}(ms);function js(t,e){return ra("equalTo","key",e,!0),new Ms(t,e)}function Fs(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=qt(t);try{for(var a=Z(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}!function(t){it(!Wi,"__referenceConstructor has already been defined"),Wi=t}(Ya),function(t){it(!Ji,"__referenceConstructor has already been defined"),Ji=t}(Ya);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Us={},Vs=!1;function zs(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||Re("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ae("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Fa(o,i),u=s.repoInfo,l=void 0;"undefined"!=typeof process&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,o="http://"+l+"?ns="+u.namespace,u=(s=Fa(o,i)).repoInfo):a=!s.repoInfo.secure;var c=i&&a?new Ze(Ze.OWNER):new Xe(t.name,t.options,e);aa("Invalid Firebase Database URL",s),Pn(s.path)||Re("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Us[e.name];i||(i={},Us[e.name]=i);var o=i[t.toURLString()];o&&Re("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new va(t,Vs,n,r),i[t.toURLString()]=o,o}(u,t,c,new Qe(t.name,n));return new Ws(h,t)}var Ws=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(ma(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,kn())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=Us[e])&&n[t.key]===t||Re("Database "+e+"("+t.repoInfo_+") has already been deleted."),Sa(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&Re("Cannot call "+t+" on a deleted database.")},t}();function Bs(t,e,n,r){void 0===r&&(r={}),(t=qt(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Re("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Re('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ze(Ze.OWNER);else if(r.mockUserToken){var a=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=J({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[st.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),st.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r.mockUserToken,t.app.options.projectId);o=new Ze(a)}!function(t,e,n,r){t.repoInfo_=new rn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function Hs(t){(t=qt(t))._checkNotDeleted("goOffline"),Sa(t._repo)}function $s(t){var e;(t=qt(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(da)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ks={".sv":"timestamp"};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Gs=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Ys(t,e,n){var r;if(t=qt(t),oa("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new ht,a=cs(t,(function(){}));return function(t,e,n,r,i,o){Na(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Ce(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Aa(t,e,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Zo("transaction failed: Data returned ",u,a.path),a.status=0;var l=jo(t.transactionQueueTree_,e),c=Fo(l)||[];c.push(a),Uo(l,c);var h=void 0;"object"==typeof u&&null!==u&&It(u,".priority")?(h=kt(u,".priority"),it(Qo(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(go(t.serverSyncTree_,e)||dr.EMPTY_NODE).getPriority().val();var f=ya(t),p=mr(u,h),d=qo(p,s,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=d,a.currentWriteId=Ia(t);var v=co(t.serverSyncTree_,e,d,a.currentWriteId,a.applyLocally);ha(t.eventQueue_,e,v),Pa(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new Ja(r,new Ya(t._repo,t._path),ur),o.resolve(new Gs(n,i)))}),a,i),o.promise}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Js=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){At("OnDisconnect.cancel",0,1,arguments.length),Ot("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){At("OnDisconnect.remove",0,1,arguments.length),Ot("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){At("OnDisconnect.set",1,2,arguments.length),Ot("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){At("OnDisconnect.setWithPriority",2,3,arguments.length),Ot("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(At("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,De("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ot("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Qs=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return At("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Xs=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return At("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return At("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return At("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return At("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return At("DataSnapshot.child",0,1,arguments.length),e=String(e),ia("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return At("DataSnapshot.hasChild",1,1,arguments.length),ia("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return At("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return At("DataSnapshot.forEach",1,1,arguments.length),Ot("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return At("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return At("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return At("DataSnapshot.ref",0,0,arguments.length),new tu(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Zs=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,a=this;At("Query.on",2,4,arguments.length),Ot("Query.on","callback",n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(s.context,new Xs(a.database,t),e)};u.userCallback=n,u.context=s.context;var l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return cs(this._delegate,u,l),n;case"child_added":return hs(this._delegate,u,l),n;case"child_removed":return ds(this._delegate,u,l),n;case"child_changed":return fs(this._delegate,u,l),n;case"child_moved":return ps(this._delegate,u,l),n;default:throw new Error(Pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(At("Query.off",0,3,arguments.length),na("Query.off",t,!0),Ot("Query.off","callback",e,!0),Rt("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,vs(this._delegate,t,r)}else vs(this._delegate,t)},t.prototype.get=function(){var t=this;return as(this._delegate).then((function(e){return new Xs(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;At("Query.once",1,4,arguments.length),Ot("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=new ht,u=function(t,e){var r=new Xs(o.database,t);n&&n.call(a.context,r,e),s.resolve(r)};u.userCallback=n,u.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)};switch(e){case"value":cs(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":hs(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":ds(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":fs(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":ps(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(Pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},t.prototype.limitToFirst=function(e){return At("Query.limitToFirst",1,1,arguments.length),new t(this.database,Fs(this._delegate,Es(e)))},t.prototype.limitToLast=function(e){return At("Query.limitToLast",1,1,arguments.length),new t(this.database,Fs(this._delegate,Ns(e)))},t.prototype.orderByChild=function(e){return At("Query.orderByChild",1,1,arguments.length),new t(this.database,Fs(this._delegate,As(e)))},t.prototype.orderByKey=function(){return At("Query.orderByKey",0,0,arguments.length),new t(this.database,Fs(this._delegate,Os()))},t.prototype.orderByPriority=function(){return At("Query.orderByPriority",0,0,arguments.length),new t(this.database,Fs(this._delegate,Ds()))},t.prototype.orderByValue=function(){return At("Query.orderByValue",0,0,arguments.length),new t(this.database,Fs(this._delegate,Ls()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),At("Query.startAt",0,2,arguments.length),new t(this.database,Fs(this._delegate,Is(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),At("Query.startAfter",0,2,arguments.length),new t(this.database,Fs(this._delegate,Cs(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),At("Query.endAt",0,2,arguments.length),new t(this.database,Fs(this._delegate,ys(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),At("Query.endBefore",0,2,arguments.length),new t(this.database,Fs(this._delegate,bs(e,n)))},t.prototype.equalTo=function(e,n){return At("Query.equalTo",1,2,arguments.length),new t(this.database,Fs(this._delegate,js(e,n)))},t.prototype.toString=function(){return At("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return At("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(At("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Ot(t,"cancel",r.cancel,!0),r.context=n,Rt(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Pt(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new tu(this.database,new Ya(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),tu=function(t){function e(e,n){var r=t.call(this,e,new Ha(n._repo,n._path,new Or,!1))||this;return r.database=e,r._delegate=n,r}return Y(e,t),e.prototype.getKey=function(){return At("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return At("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Za(this._delegate,t))},e.prototype.getParent=function(){At("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return At("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){At("Reference.set",1,2,arguments.length),Ot("Reference.set","onComplete",e,!0);var n=ns(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(At("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,De("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oa("Reference.update",this._delegate._path),Ot("Reference.update","onComplete",e,!0);var i=os(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){At("Reference.setWithPriority",2,3,arguments.length),Ot("Reference.setWithPriority","onComplete",n,!0);var r=is(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){At("Reference.remove",0,1,arguments.length),Ot("Reference.remove","onComplete",t,!0);var e=es(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;At("Reference.transaction",1,3,arguments.length),Ot("Reference.transaction","transactionUpdate",t,!1),Ot("Reference.transaction","onComplete",e,!0),sa("Reference.transaction","applyLocally",n,!0);var i=Ys(this._delegate,t,{applyLocally:n}).then((function(t){return new Qs(t.committed,new Xs(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){At("Reference.setPriority",1,2,arguments.length),Ot("Reference.setPriority","onComplete",e,!0);var n=rs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;At("Reference.push",0,2,arguments.length),Ot("Reference.push","onComplete",n,!0);var i=ts(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},e.prototype.onDisconnect=function(){return oa("Reference.onDisconnect",this._delegate._path),new Js(new Ba(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zs),eu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Bs(this._delegate,t,e,n)},t.prototype.ref=function(t){if(At("database.ref",0,1,arguments.length),t instanceof tu){var e=Xa(this._delegate,t.toString());return new tu(this,e)}e=Qa(this._delegate,t);return new tu(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";At(e,1,1,arguments.length);var n=Xa(this._delegate,t);return new tu(this,n)},t.prototype.goOffline=function(){return At("database.goOffline",0,0,arguments.length),Hs(this._delegate)},t.prototype.goOnline=function(){return At("database.goOnline",0,0,arguments.length),$s(this._delegate)},t.ServerValue={TIMESTAMP:Ks,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nu=Object.freeze({__proto__:null,forceLongPolling:function(){mn.forceDisallow(),pn.forceAllow()},forceWebSockets:function(){pn.forceDisallow()},isWebSocketsAvailable:function(){return mn.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Hr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);We(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;me(r);var u=new jt("auth-internal",new Ut("database-standalone"));return u.setComponent(new Lt("auth-internal",(function(){return i}),"PRIVATE")),{instance:new eu(zs(e,u,void 0,n,s),e),namespace:o}}}),ru=Wn;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Wn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Wn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var iu=yn,ou=rn,au=Object.freeze({__proto__:null,DataConnection:ru,RealTimeConnection:iu,hijackHash:function(t){var e=Wn.prototype.put;return Wn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Wn.prototype.put=e}},ConnectionTarget:ou,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Vs=t}(t)}}),su=eu.ServerValue;function uu(t){f(t,"svelte-ulsmx4",".h-4.svelte-ulsmx4{height:1rem\n}.w-4.svelte-ulsmx4{width:1rem\n}")}function lu(e){let n,r,i,o;return{c(){n=m("svg"),r=m("path"),i=m("polyline"),o=m("line"),b(r,"d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"),b(i,"points","16 17 21 12 16 7"),b(o,"x1","21"),b(o,"y1","12"),b(o,"x2","9"),b(o,"y2","12"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"width","24"),b(n,"height","24"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"stroke","currentColor"),b(n,"stroke-width","2"),b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"class","h-4 w-4 svelte-ulsmx4")},m(t,e){p(t,n,e),h(n,r),h(n,i),h(n,o)},p:t,i:t,o:t,d(t){t&&d(n)}}}!function(t){me(t.SDK_VERSION),t.INTERNAL.registerComponent(new Lt("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new eu(zs(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:tu,Query:Zs,Database:eu,DataSnapshot:Xs,enableLogging:xe,INTERNAL:nu,ServerValue:su,TEST_ACCESS:au}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.10.9")}(ce);class cu extends K{constructor(t){super(),$(this,t,null,lu,o,{},uu)}}var hu=function(t){var e=t.map((function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})),n={},r={};t.forEach((function(t,i){n[t]=e[i],r[e[i]]=t}));var i=new RegExp("["+(t.join("").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"]"),"g"),o=new RegExp(e.join("|"),"g");return{encode:function(t){return t.replace(i,(function(t){return n[t]}))},decode:function(t){return t.replace(o,(function(t){return r[t]}))}}},fu=hu(".$[]#/%".split("")),pu=fu.encode;fu.decode;var du=hu(".$[]#%".split(""));du.encode,du.decode;var vu=pu;function mu(t){f(t,"svelte-11pprrw",'.svelte-11pprrw,.svelte-11pprrw::before,.svelte-11pprrw::after{box-sizing:border-box}button.svelte-11pprrw{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button.svelte-11pprrw{text-transform:none}button.svelte-11pprrw,[type=\'button\'].svelte-11pprrw{-webkit-appearance:button}.svelte-11pprrw::-moz-focus-inner{border-style:none;padding:0}.svelte-11pprrw:-moz-focusring{outline:1px dotted ButtonText}.svelte-11pprrw:-moz-ui-invalid{box-shadow:none}.svelte-11pprrw::-webkit-inner-spin-button,.svelte-11pprrw::-webkit-outer-spin-button{height:auto}.svelte-11pprrw::-webkit-search-decoration{-webkit-appearance:none}.svelte-11pprrw::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}button.svelte-11pprrw{background-color:transparent;background-image:none}.svelte-11pprrw,.svelte-11pprrw::before,.svelte-11pprrw::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}button.svelte-11pprrw{cursor:pointer}button.svelte-11pprrw{padding:0;line-height:inherit;color:inherit}.svelte-11pprrw,.svelte-11pprrw::before,.svelte-11pprrw::after{--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.form-input.svelte-11pprrw,.form-textarea.svelte-11pprrw,.form-select.svelte-11pprrw,.form-multiselect.svelte-11pprrw{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0px;padding-top:0.5rem;padding-right:0.75rem;padding-bottom:0.5rem;padding-left:0.75rem;font-size:1rem;line-height:1.5rem}.form-input.svelte-11pprrw:focus,.form-textarea.svelte-11pprrw:focus,.form-select.svelte-11pprrw:focus,.form-multiselect.svelte-11pprrw:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#2563eb;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);border-color:#2563eb}.form-input.svelte-11pprrw::-moz-placeholder,.form-textarea.svelte-11pprrw::-moz-placeholder{color:#6b7280;opacity:1}.form-input.svelte-11pprrw:-ms-input-placeholder,.form-textarea.svelte-11pprrw:-ms-input-placeholder{color:#6b7280;opacity:1}.form-input.svelte-11pprrw::placeholder,.form-textarea.svelte-11pprrw::placeholder{color:#6b7280;opacity:1}.mx-auto.svelte-11pprrw{margin-left:auto;margin-right:auto}.my-16.svelte-11pprrw{margin-top:4rem;margin-bottom:4rem}.mt-4.svelte-11pprrw{margin-top:1rem}.mt-3.svelte-11pprrw{margin-top:0.75rem}.mb-2.svelte-11pprrw{margin-bottom:0.5rem}.mr-2.svelte-11pprrw{margin-right:0.5rem}.flex.svelte-11pprrw{display:flex}.h-9.svelte-11pprrw{height:2.25rem}.h-24.svelte-11pprrw{height:6rem}.h-12.svelte-11pprrw{height:3rem}.h-4.svelte-11pprrw{height:1rem}.w-full.svelte-11pprrw{width:100%}.w-3\\/4.svelte-11pprrw{width:75%}.w-12.svelte-11pprrw{width:3rem}.w-4.svelte-11pprrw{width:1rem}.flex-grow.svelte-11pprrw{flex-grow:1}.flex-col.svelte-11pprrw{flex-direction:column}.items-center.svelte-11pprrw{align-items:center}.gap-10.svelte-11pprrw{gap:2.5rem}.gap-2.svelte-11pprrw{gap:0.5rem}.gap-4.svelte-11pprrw{gap:1rem}.self-end.svelte-11pprrw{align-self:flex-end}.rounded-md.svelte-11pprrw{border-radius:0.375rem}.rounded-full.svelte-11pprrw{border-radius:9999px}.\\!rounded-lg.svelte-11pprrw{border-radius:0.5rem !important}.border-gray-400.svelte-11pprrw{--tw-border-opacity:1;border-color:rgba(156, 163, 175, var(--tw-border-opacity))}.bg-primary-50.svelte-11pprrw{--tw-bg-opacity:1;background-color:rgba(240, 249, 255, var(--tw-bg-opacity))}.\\!bg-primary-200.svelte-11pprrw{--tw-bg-opacity:1 !important;background-color:rgba(186, 230, 253, var(--tw-bg-opacity)) !important}.\\!bg-white.svelte-11pprrw{--tw-bg-opacity:1 !important;background-color:rgba(255, 255, 255, var(--tw-bg-opacity)) !important}.bg-gradient-to-r.svelte-11pprrw{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-primary-100.svelte-11pprrw{--tw-gradient-from:#e0f2fe;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(224, 242, 254, 0))}.via-blue-100.svelte-11pprrw{--tw-gradient-stops:var(--tw-gradient-from), #dbeafe, var(--tw-gradient-to, rgba(219, 234, 254, 0))}.to-purple-100.svelte-11pprrw{--tw-gradient-to:#ede9fe}.py-1.svelte-11pprrw{padding-top:0.25rem;padding-bottom:0.25rem}.px-4.svelte-11pprrw{padding-left:1rem;padding-right:1rem}.px-6.svelte-11pprrw{padding-left:1.5rem;padding-right:1.5rem}.py-2.svelte-11pprrw{padding-top:0.5rem;padding-bottom:0.5rem}.\\!px-3.svelte-11pprrw{padding-left:0.75rem !important;padding-right:0.75rem !important}.\\!py-1\\.5.svelte-11pprrw{padding-top:0.375rem !important;padding-bottom:0.375rem !important}.\\!py-1.svelte-11pprrw{padding-top:0.25rem !important;padding-bottom:0.25rem !important}.font-sans.svelte-11pprrw{font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}.text-3xl.svelte-11pprrw{font-size:1.875rem;line-height:2.25rem}.text-2xl.svelte-11pprrw{font-size:1.5rem;line-height:2rem}.text-lg.svelte-11pprrw{font-size:1.125rem;line-height:1.75rem}.text-base.svelte-11pprrw{font-size:1rem;line-height:1.5rem}.text-xl.svelte-11pprrw{font-size:1.25rem;line-height:1.75rem}.font-bold.svelte-11pprrw{font-weight:700}.font-medium.svelte-11pprrw{font-weight:500}.font-normal.svelte-11pprrw{font-weight:400}.text-primary-600.svelte-11pprrw{--tw-text-opacity:1;color:rgba(2, 132, 199, var(--tw-text-opacity))}.text-primary-900.svelte-11pprrw{--tw-text-opacity:1;color:rgba(12, 74, 110, var(--tw-text-opacity))}.text-primary-800.svelte-11pprrw{--tw-text-opacity:1;color:rgba(7, 89, 133, var(--tw-text-opacity))}.text-gray-400.svelte-11pprrw{--tw-text-opacity:1;color:rgba(156, 163, 175, var(--tw-text-opacity))}.\\!ring-1.svelte-11pprrw{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important}.\\!ring-primary-500.svelte-11pprrw{--tw-ring-opacity:1 !important;--tw-ring-color:rgba(14, 165, 233, var(--tw-ring-opacity)) !important}.filter.svelte-11pprrw{filter:var(--tw-filter)}.hover\\:bg-primary-100.svelte-11pprrw:hover{--tw-bg-opacity:1;background-color:rgba(224, 242, 254, var(--tw-bg-opacity))}.hover\\:\\!bg-primary-100.svelte-11pprrw:hover{--tw-bg-opacity:1 !important;background-color:rgba(224, 242, 254, var(--tw-bg-opacity)) !important}.hover\\:\\!bg-primary-50.svelte-11pprrw:hover{--tw-bg-opacity:1 !important;background-color:rgba(240, 249, 255, var(--tw-bg-opacity)) !important}.hover\\:from-primary-200.svelte-11pprrw:hover{--tw-gradient-from:#bae6fd;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(186, 230, 253, 0))}.hover\\:via-blue-200.svelte-11pprrw:hover{--tw-gradient-stops:var(--tw-gradient-from), #bfdbfe, var(--tw-gradient-to, rgba(191, 219, 254, 0))}.hover\\:to-purple-200.svelte-11pprrw:hover{--tw-gradient-to:#ddd6fe}.hover\\:\\!shadow-md.svelte-11pprrw:hover{--tw-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow) !important}.hover\\:\\!ring-2.svelte-11pprrw:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important}.disabled\\:cursor-not-allowed.svelte-11pprrw:disabled{cursor:not-allowed}.disabled\\:saturate-50.svelte-11pprrw:disabled{--tw-saturate:saturate(.5);filter:var(--tw-filter)}.disabled\\:hover\\:from-primary-100.svelte-11pprrw:disabled:hover{--tw-gradient-from:#e0f2fe;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(224, 242, 254, 0))}.disabled\\:hover\\:via-blue-100.svelte-11pprrw:disabled:hover{--tw-gradient-stops:var(--tw-gradient-from), #dbeafe, var(--tw-gradient-to, rgba(219, 234, 254, 0))}')}function gu(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function yu(t,e){let n,r,i,o,a,s,u,l,f,m=e[17]+"",I=(e[4]?"-":e[3][e[17]])+"";function k(){return e[8](e[17])}return{key:t,first:null,c(){n=v("button"),r=v("span"),i=g(m),o=y(),a=g(I),s=y(),b(r,"class","mr-2 svelte-11pprrw"),b(n,"type","button"),b(n,"class",u=c((e[2].includes(e[17])?"!bg-primary-200 hover:!bg-primary-100":"!bg-white hover:!bg-primary-50")+" !px-3 !py-1.5 !rounded-lg !ring-1 !ring-primary-500 hover:!ring-2 hover:!shadow-md")+" svelte-11pprrw"),this.first=n},m(t,e){p(t,n,e),h(n,r),h(r,i),h(n,o),h(n,a),h(n,s),l||(f=w(n,"click",k),l=!0)},p(t,r){e=t,1&r&&m!==(m=e[17]+"")&&_(i,m),25&r&&I!==(I=(e[4]?"-":e[3][e[17]])+"")&&_(a,I),5&r&&u!==(u=c((e[2].includes(e[17])?"!bg-primary-200 hover:!bg-primary-100":"!bg-white hover:!bg-primary-50")+" !px-3 !py-1.5 !rounded-lg !ring-1 !ring-primary-500 hover:!ring-2 hover:!shadow-md")+" svelte-11pprrw")&&b(n,"class",u)},d(t){t&&d(n),l=!1,f()}}}function wu(e){let n,r=[],i=new Map,o=e[0];const a=t=>t[19];for(let t=0;t<o.length;t+=1){let n=gu(e,o,t),s=a(n);i.set(s,r[t]=yu(s,n))}return{c(){n=v("div");for(let t=0;t<r.length;t+=1)r[t].c();b(n,"class","flex gap-4 text-2xl mt-3 svelte-11pprrw")},m(t,e){p(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){61&e&&(o=t[0],r=V(r,e,a,1,t,o,i,n,U,yu,null,gu))},i:t,o:t,d(t){t&&d(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function bu(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o()));let a,s,u,{reactions:c=["","","",""]}=n,{page:h=(window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/")}=n;try{const t=de();a=t.authStore,o(),o=l(a,(t=>r(7,i=t))),s=t.loginWithGoogle,u=t.logout}catch(t){throw t}const f=ce.database();let p=[],d={};c.forEach((t=>r(3,d[t]=0,d)));let v=!0,m=!0;const g=t=>{!i.user||m||v||(p.includes(t)?(async t=>{r(2,p=p.filter((e=>e!==t))),r(3,d[t]--,d),r(3,d={...d});const e=`posts/${vu(h)}/reactions`,n=`users/activity/${i.user.uid}/${vu(h)}/reactions`,o={};o[`${e}/count/${t}`]=ce.database.ServerValue.increment(-1),o[`${e}/users/${t}/${i.user.uid}`]=null,o[`${n}/${t}`]=null,f.ref().update(o)})(t):(async t=>{r(2,p=[...p,t]),r(3,d[t]++,d),r(3,d={...d});const e=`posts/${vu(h)}/reactions`,n=`users/activity/${i.user.uid}/${vu(h)}/reactions`,o={};o[`${e}/count/${t}`]=ce.database.ServerValue.increment(1),o[`${e}/users/${t}/${i.user.uid}`]=!0,o[`${n}/${t}`]=!0,f.ref().update(o)})(t))};return e.$$set=t=>{"reactions"in t&&r(0,c=t.reactions),"page"in t&&r(6,h=t.page)},e.$$.update=()=>{192&e.$$.dirty&&(f.ref(`posts/${vu(h)}/reactions/count`).once("value").then((t=>t.val())).then((t=>(t=>{Object.entries(t).forEach((([t,e])=>{r(3,d[t]=e,d)})),r(4,m=!1)})(t??{}))),i.user?f.ref(`users/activity/${i.user.uid}/${vu(h)}/reactions`).once("value").then((t=>t.val())).then((t=>(t=>{r(2,p=Object.keys(t)),v=!1})(t??{}))):r(2,p=[]))},[c,a,p,d,m,g,h,i,t=>g(t)]}class _u extends K{constructor(t){super(),$(this,t,bu,wu,o,{reactions:0,page:6},mu)}}var Iu="en",ku={},Cu={};function Tu(){return Iu}function Eu(t){return ku[t]?t:Cu[t.toLowerCase()]?Cu[t.toLowerCase()]:void 0}function Su(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.localeMatcher||"lookup";switch(n){case"lookup":case"best fit":return Nu(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function Nu(t){var e=Eu(t);if(e)return e;for(var n=t.split("-");t.length>1;){n.pop();var r=Eu(t=n.join("-"));if(r)return r}}var xu={af:function(t){return 1==t?"one":"other"},am:function(t){return t>=0&&t<=1?"one":"other"},ar:function(t){var e=String(t).split("."),n=Number(e[0])==t&&e[0].slice(-2);return 0==t?"zero":1==t?"one":2==t?"two":n>=3&&n<=10?"few":n>=11&&n<=99?"many":"other"},ast:function(t){var e=!String(t).split(".")[1];return 1==t&&e?"one":"other"},be:function(t){var e=String(t).split("."),n=Number(e[0])==t,r=n&&e[0].slice(-1),i=n&&e[0].slice(-2);return 1==r&&11!=i?"one":r>=2&&r<=4&&(i<12||i>14)?"few":n&&0==r||r>=5&&r<=9||i>=11&&i<=14?"many":"other"},br:function(t){var e=String(t).split("."),n=Number(e[0])==t,r=n&&e[0].slice(-1),i=n&&e[0].slice(-2),o=n&&e[0].slice(-6);return 1==r&&11!=i&&71!=i&&91!=i?"one":2==r&&12!=i&&72!=i&&92!=i?"two":(3==r||4==r||9==r)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":0!=t&&n&&0==o?"many":"other"},bs:function(t){var e=String(t).split("."),n=e[0],r=e[1]||"",i=!e[1],o=n.slice(-1),a=n.slice(-2),s=r.slice(-1),u=r.slice(-2);return i&&1==o&&11!=a||1==s&&11!=u?"one":i&&o>=2&&o<=4&&(a<12||a>14)||s>=2&&s<=4&&(u<12||u>14)?"few":"other"},cs:function(t){var e=String(t).split("."),n=e[0],r=!e[1];return 1==t&&r?"one":n>=2&&n<=4&&r?"few":r?"other":"many"},cy:function(t){return 0==t?"zero":1==t?"one":2==t?"two":3==t?"few":6==t?"many":"other"},da:function(t){var e=String(t).split("."),n=e[0],r=Number(e[0])==t;return 1!=t&&(r||0!=n&&1!=n)?"other":"one"},dsb:function(t){var e=String(t).split("."),n=e[0],r=e[1]||"",i=!e[1],o=n.slice(-2),a=r.slice(-2);return i&&1==o||1==a?"one":i&&2==o||2==a?"two":i&&(3==o||4==o)||3==a||4==a?"few":"other"},dz:function(t){return"other"},fil:function(t){var e=String(t).split("."),n=e[0],r=e[1]||"",i=!e[1],o=n.slice(-1),a=r.slice(-1);return i&&(1==n||2==n||3==n)||i&&4!=o&&6!=o&&9!=o||!i&&4!=a&&6!=a&&9!=a?"one":"other"},fr:function(t){return t>=0&&t<2?"one":"other"},ga:function(t){var e=String(t).split("."),n=Number(e[0])==t;return 1==t?"one":2==t?"two":n&&t>=3&&t<=6?"few":n&&t>=7&&t<=10?"many":"other"},gd:function(t){var e=String(t).split("."),n=Number(e[0])==t;return 1==t||11==t?"one":2==t||12==t?"two":n&&t>=3&&t<=10||n&&t>=13&&t<=19?"few":"other"},he:function(t){var e=String(t).split("."),n=e[0],r=!e[1],i=Number(e[0])==t,o=i&&e[0].slice(-1);return 1==t&&r?"one":2==n&&r?"two":r&&(t<0||t>10)&&i&&0==o?"many":"other"},is:function(t){var e=String(t).split("."),n=e[0],r=Number(e[0])==t,i=n.slice(-1),o=n.slice(-2);return r&&1==i&&11!=o||!r?"one":"other"},ksh:function(t){return 0==t?"zero":1==t?"one":"other"},lt:function(t){var e=String(t).split("."),n=e[1]||"",r=Number(e[0])==t,i=r&&e[0].slice(-1),o=r&&e[0].slice(-2);return 1==i&&(o<11||o>19)?"one":i>=2&&i<=9&&(o<11||o>19)?"few":0!=n?"many":"other"},lv:function(t){var e=String(t).split("."),n=e[1]||"",r=n.length,i=Number(e[0])==t,o=i&&e[0].slice(-1),a=i&&e[0].slice(-2),s=n.slice(-2),u=n.slice(-1);return i&&0==o||a>=11&&a<=19||2==r&&s>=11&&s<=19?"zero":1==o&&11!=a||2==r&&1==u&&11!=s||2!=r&&1==u?"one":"other"},mk:function(t){var e=String(t).split("."),n=e[0],r=e[1]||"",i=!e[1],o=n.slice(-1),a=n.slice(-2),s=r.slice(-1),u=r.slice(-2);return i&&1==o&&11!=a||1==s&&11!=u?"one":"other"},mt:function(t){var e=String(t).split("."),n=Number(e[0])==t&&e[0].slice(-2);return 1==t?"one":0==t||n>=2&&n<=10?"few":n>=11&&n<=19?"many":"other"},pa:function(t){return 0==t||1==t?"one":"other"},pl:function(t){var e=String(t).split("."),n=e[0],r=!e[1],i=n.slice(-1),o=n.slice(-2);return 1==t&&r?"one":r&&i>=2&&i<=4&&(o<12||o>14)?"few":r&&1!=n&&(0==i||1==i)||r&&i>=5&&i<=9||r&&o>=12&&o<=14?"many":"other"},pt:function(t){var e=String(t).split(".")[0];return 0==e||1==e?"one":"other"},ro:function(t){var e=String(t).split("."),n=!e[1],r=Number(e[0])==t&&e[0].slice(-2);return 1==t&&n?"one":!n||0==t||1!=t&&r>=1&&r<=19?"few":"other"},ru:function(t){var e=String(t).split("."),n=e[0],r=!e[1],i=n.slice(-1),o=n.slice(-2);return r&&1==i&&11!=o?"one":r&&i>=2&&i<=4&&(o<12||o>14)?"few":r&&0==i||r&&i>=5&&i<=9||r&&o>=11&&o<=14?"many":"other"},se:function(t){return 1==t?"one":2==t?"two":"other"},si:function(t){var e=String(t).split("."),n=e[0],r=e[1]||"";return 0==t||1==t||0==n&&1==r?"one":"other"},sl:function(t){var e=String(t).split("."),n=e[0],r=!e[1],i=n.slice(-2);return r&&1==i?"one":r&&2==i?"two":r&&(3==i||4==i)||!r?"few":"other"}};xu.as=xu.am,xu.az=xu.af,xu.bg=xu.af,xu.bn=xu.am,xu.ca=xu.ast,xu.ce=xu.af,xu.chr=xu.af,xu.de=xu.ast,xu.ee=xu.af,xu.el=xu.af,xu.en=xu.ast,xu.es=xu.af,xu.et=xu.ast,xu.eu=xu.af,xu.fa=xu.am,xu.fi=xu.ast,xu.fo=xu.af,xu.fur=xu.af,xu.fy=xu.ast,xu.gl=xu.ast,xu.gu=xu.am,xu.hi=xu.am,xu.hr=xu.bs,xu.hsb=xu.dsb,xu.hu=xu.af,xu.hy=xu.fr,xu.ia=xu.ast,xu.id=xu.dz,xu.it=xu.ast,xu.ja=xu.dz,xu.jgo=xu.af,xu.jv=xu.dz,xu.ka=xu.af,xu.kea=xu.dz,xu.kk=xu.af,xu.kl=xu.af,xu.km=xu.dz,xu.kn=xu.am,xu.ko=xu.dz,xu.ku=xu.af,xu.ky=xu.af,xu.lb=xu.af,xu.lkt=xu.dz,xu.lo=xu.dz,xu.ml=xu.af,xu.mn=xu.af,xu.mr=xu.am,xu.ms=xu.dz,xu.my=xu.dz,xu.nb=xu.af,xu.ne=xu.af,xu.nl=xu.ast,xu.nn=xu.af,xu.or=xu.af,xu.ps=xu.af,xu["pt-PT"]=xu.ast,xu.sah=xu.dz,xu.sd=xu.af,xu.sk=xu.cs,xu.so=xu.af,xu.sq=xu.af,xu.sr=xu.bs,xu.sv=xu.ast,xu.sw=xu.ast,xu.ta=xu.af,xu.te=xu.af,xu.th=xu.dz,xu.ti=xu.pa,xu.tk=xu.af,xu.to=xu.dz,xu.tr=xu.af,xu.ug=xu.af,xu.uk=xu.ru,xu.ur=xu.ast,xu.uz=xu.af,xu.vi=xu.dz,xu.wae=xu.af,xu.yi=xu.ast,xu.yue=xu.dz,xu.zh=xu.dz,xu.zu=xu.am;var Au=xu;function Pu(t){return"pt-PT"===t?t:function(t){var e=t.match(Ou);if(!e)throw new TypeError("Invalid locale: ".concat(t));return e[1]}(t)}var Ou=/^([a-z0-9]+)/i;function Ru(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Du=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=t.supportedLocalesOf(e);if(0===r.length)throw new RangeError("Unsupported locale: "+e);if(n&&"cardinal"!==n.type)throw new RangeError('Only "cardinal" "type" is supported');this.$=Au[Pu(r[0])]}var e,n,r;return e=t,r=[{key:"supportedLocalesOf",value:function(t){return"string"==typeof t&&(t=[t]),t.filter((function(t){return Au[Pu(t)]}))}}],(n=[{key:"select",value:function(t){return this.$(t)}}])&&Ru(e.prototype,n),r&&Ru(e,r),t}();function qu(t){return(qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Uu(t,e,n[e])}))}return t}function Mu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ju(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vu=["second","minute","hour","day","week","month","quarter","year"],zu=["auto","always"],Wu=["long","short","narrow"],Bu=["lookup","best fit"],Hu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ju(this,t),Uu(this,"numeric","always"),Uu(this,"style","long"),Uu(this,"localeMatcher","lookup");var r=n.numeric,i=n.style,o=n.localeMatcher;if(void 0!==r){if(zu.indexOf(r)<0)throw new RangeError('Invalid "numeric" option: '.concat(r));this.numeric=r}if(void 0!==i){if(Wu.indexOf(i)<0)throw new RangeError('Invalid "style" option: '.concat(i));this.style=i}if(void 0!==o){if(Bu.indexOf(o)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(o));this.localeMatcher=o}if("string"==typeof e&&(e=[e]),e.push(Tu()),this.locale=t.supportedLocalesOf(e,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");Du.supportedLocalesOf(this.locale).length>0?this.pluralRules=new Du(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),"undefined"!=typeof Intl&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=Su(this.locale,{localeMatcher:this.localeMatcher})}var e,n,r;return e=t,(n=[{key:"format",value:function(){var t=Yu(arguments),e=Mu(t,2),n=e[0],r=e[1];return this.getRule(n,r).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"formatToParts",value:function(){var t=Yu(arguments),e=Mu(t,2),n=e[0],r=e[1],i=this.getRule(n,r),o=i.indexOf("{0}");if(o<0)return[{type:"literal",value:i}];var a=[];return o>0&&a.push({type:"literal",value:i.slice(0,o)}),a=a.concat(this.formatNumberToParts(Math.abs(n)).map((function(t){return Lu({},t,{unit:r})}))),o+"{0}".length<i.length-1&&a.push({type:"literal",value:i.slice(o+"{0}".length)}),a}},{key:"getRule",value:function(t,e){var n=function(t){return ku[t]}(this.locale)[this.style][e];if("auto"===this.numeric)if(-2===t||-1===t){var r=n["previous".concat(-1===t?"":"-"+Math.abs(t))];if(r)return r}else if(1===t||2===t){var i=n["next".concat(1===t?"":"-"+Math.abs(t))];if(i)return i}else if(0===t&&n.current)return n.current;var o,a=n[(o=t,o<0||0===o&&function(t){return 1/t==-1/0}(o)?"past":"future")];return"string"==typeof a?a:a[this.pluralRules&&this.pluralRules.select(Math.abs(t))||"other"]||a.other}},{key:"formatNumber",value:function(t){return this.numberFormat?this.numberFormat.format(t):String(t)}},{key:"formatNumberToParts",value:function(t){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(t):[{type:"integer",value:this.formatNumber(t)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}])&&Fu(e.prototype,n),r&&Fu(e,r),t}();Hu.supportedLocalesOf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t)t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter((function(t){return Su(t,e)}))},Hu.addLocale=function(t){if(!t)throw new Error("No locale data passed");ku[t.locale]=t,Cu[t.locale.toLowerCase()]=t.locale},Hu.setDefaultLocale=function(t){Iu=t},Hu.getDefaultLocale=Tu,Hu.PluralRules=Du;var $u='Invalid "unit" argument';function Ku(t){if("symbol"===qu(t))throw new TypeError($u);if("string"!=typeof t)throw new RangeError("".concat($u,": ").concat(t));if("s"===t[t.length-1]&&(t=t.slice(0,t.length-1)),Vu.indexOf(t)<0)throw new RangeError("".concat($u,": ").concat(t));return t}function Gu(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat('Invalid "number" argument',": ").concat(t));return t}function Yu(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[Gu(t[0]),Ku(t[1])]}function Ju(t){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xu=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={},(n="cache")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,r;return e=t,(n=[{key:"get",value:function(){for(var t=this.cache,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];if("object"!==Ju(t))return;t=t[o]}return t}},{key:"put",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.pop(),i=e.pop(),o=this.cache,a=0;a<e.length;a++){var s=e[a];"object"!==Ju(o[s])&&(o[s]={}),o=o[s]}return o[i]=r}}])&&Qu(e.prototype,n),r&&Qu(e,r),t}();function Zu(t){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tl(t,e){var n=t,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;if(e(a))return a;for(var s=a.split("-");s.length>1;)if(s.pop(),e(a=s.join("-")))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}var el=60,nl=3600,rl=86400,il=7*rl,ol=2630016,al=31556952;function sl(t){switch(t){case"second":return 1;case"minute":return el;case"hour":return nl;case"day":return rl;case"week":return il;case"month":return ol;case"year":return al}}function ul(t){return void 0!==t.factor?t.factor:sl(t.unit||t.formatAs)||1}function ll(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function cl(t){switch(t){case"floor":return 1;default:return.5}}function hl(t){return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){var n,r=e.prevStep,i=e.timestamp,o=e.now,a=e.future,s=e.round;return r&&(r.id||r.unit)&&(n=t["threshold_for_".concat(r.id||r.unit)]),void 0===n&&void 0!==t.threshold&&"function"==typeof(n=t.threshold)&&(n=n(o,a)),void 0===n&&(n=t.minTime),"object"===hl(n)&&(n=r&&r.id&&void 0!==n[r.id]?n[r.id]:n.default),"function"==typeof n&&(n=n(i,{future:a,getMinTimeForUnit:function(t,e){return pl(t,e||r&&r.formatAs,{round:s})}})),void 0===n&&t.test&&(n=t.test(i,{now:o,future:a})?0:9007199254740991),void 0===n&&(r?t.formatAs&&r.formatAs&&(n=pl(t.formatAs,r.formatAs,{round:s})):n=0),void 0===n&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),n}function pl(t,e,n){var r,i=n.round,o=sl(t);if(r=sl("now"===e?t:e),void 0!==o&&void 0!==r)return o-r*(1-cl(i))}function dl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){vl(t,e,n[e])}))}return t}function vl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ml(t,e,n){var r=n.now,i=n.future,o=n.round,a=n.units,s=n.getNextStep,u=function(t,e,n){var r=n.now,i=n.future,o=n.round;if(0===t.length)return;var a=gl(t,e,{now:r,future:i||e<0,round:o});if(-1===a)return;var s=t[a];if(s.granularity){if(0===ll(o)(Math.abs(e)/ul(s)/s.granularity)*s.granularity&&a>0)return t[a-1]}return s}(t=function(t,e){return t.filter((function(t){var n=t.unit,r=t.formatAs;return!(n=n||r)||e.indexOf(n)>=0}))}(t,a),e,{now:r,future:i,round:o});return s?u?[t[t.indexOf(u)-1],u,t[t.indexOf(u)+1]]:[void 0,void 0,t[0]]:u}function gl(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=fl(t[r],dl({prevStep:t[r-1],timestamp:n.now-1e3*e},n));return void 0===i||Math.abs(e)<i?r-1:r===t.length-1?r:gl(t,e,n,r+1)}function yl(t,e,n){var r=n.now,i=n.round;if(sl(t)){var o=1e3*sl(t),a=e>r,s=Math.abs(e-r),u=ll(i)(s/o)*o;return a?u>0?s-u+function(t,e){return(1-cl(t))*e+1}(i,o):s-u+1:-(s-u)+function(t,e){return cl(t)*e}(i,o)}}var wl=31536e9;function bl(t,e,n){var r=n.prevStep,i=n.nextStep,o=n.now,a=n.future,s=n.round,u=t.getTime?t.getTime():t,l=function(t){return yl(t,u,{now:o,round:s})},c=function(t,e,n){var r=n.now,i=n.future,o=n.round,a=n.prevStep;if(t){var s=function(t,e,n){var r=n.now,i=n.future,o=n.round,a=n.prevStep,s=fl(t,{timestamp:e,now:r,future:i,round:o,prevStep:a});if(void 0===s)return;return i?e-1e3*s+1:0===s&&e===r?wl:e+1e3*s}(t,e,{now:r,future:i,round:o,prevStep:a});if(void 0===s)return;return s-r}return i?e-r+1:wl}(a?e:i,u,{future:a,now:o,round:s,prevStep:a?r:e});if(void 0!==c){var h;if(e&&(e.getTimeToNextUpdate&&(h=e.getTimeToNextUpdate(u,{getTimeToNextUpdateForUnit:l,getRoundFunction:ll,now:o,future:a,round:s})),void 0===h)){var f=e.unit||e.formatAs;f&&(h=l(f))}return void 0===h?c:Math.min(h,c)}}var _l={};function Il(t){return _l[t]}function kl(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");_l[t.locale]=t}var Cl={steps:[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],labels:"long"};function Tl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var El=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Tl(t,e,n[e])}))}return t}({},Cl,{steps:Cl.steps.filter((function(t){return"second"!==t.formatAs}))}),Sl=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:el,unit:"minute"},{threshold:150,granularity:5,factor:el,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:nl,unit:"hour"},{threshold:73800,factor:rl,unit:"day"},{threshold:475200,factor:il,unit:"week"},{threshold:2116800,factor:ol,unit:"month"},{threshold:27615168,factor:al,unit:"year"}],Nl={gradation:Sl,flavour:"long",units:["now","minute","hour","day","week","month","year"]},xl={gradation:Sl,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function Al(t){return t instanceof Date?t:new Date(t)}var Pl=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],Ol={},Rl={minTime:function(t,e){return e.future,(0,e.getMinTimeForUnit)("day")},format:function(t,e){return Ol[e]||(Ol[e]={}),Ol[e].dayMonth||(Ol[e].dayMonth=new Intl.DateTimeFormat(e,{month:"short",day:"numeric"})),Ol[e].dayMonth.format(Al(t))}},Dl={minTime:function(t,e){return e.future?(t-(new Date(new Date(t).getFullYear(),0).getTime()-1))/1e3:(new Date(new Date(t).getFullYear()+1,0).getTime()-t)/1e3},format:function(t,e){return Ol[e]||(Ol[e]={}),Ol[e].dayMonthYear||(Ol[e].dayMonthYear=new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"})),Ol[e].dayMonthYear.format(Al(t))}};"object"===("undefined"==typeof Intl?"undefined":Zu(Intl))&&"function"==typeof Intl.DateTimeFormat?Pl.push(Rl,Dl):Pl.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var ql={steps:Pl,labels:["mini","short-time","narrow","short"]};function Ll(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ml=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ll(t,e,n[e])}))}return t}({},ql,{steps:[{formatAs:"now"}].concat(ql.steps)});function jl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fl=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){jl(t,e,n[e])}))}return t}({},ql,{steps:ql.steps.filter((function(t){return"second"!==t.formatAs}))});function Ul(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vl=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ul(t,e,n[e])}))}return t}({},Fl,{steps:[{formatAs:"now"}].concat(Fl.steps)});function zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Wl(t,e,n[e])}))}return t}function Wl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bl=zl({},ql,{steps:ql.steps.filter((function(t){return"second"!==t.formatAs})).map((function(t){return"minute"===t.formatAs?zl({},t,{minTime:el}):t}))}),Hl={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function $l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kl=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){$l(t,e,n[e])}))}return t}({},Hl,{steps:[{formatAs:"now"}].concat(Hl.steps)});function Gl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yl=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Gl(t,e,n[e])}))}return t}({},Hl,{steps:Hl.steps.filter((function(t){return"second"!==t.formatAs}))});function Jl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ql=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Jl(t,e,n[e])}))}return t}({},Yl,{steps:[{formatAs:"now"}].concat(Yl.steps)});function Xl(t){switch(t){case"default":case"round":return Cl;case"round-minute":return El;case"approximate":return Nl;case"time":case"approximate-time":return xl;case"mini":return Hl;case"mini-now":return Kl;case"mini-minute":return Yl;case"mini-minute-now":return Ql;case"twitter":return ql;case"twitter-now":return Ml;case"twitter-minute":return Fl;case"twitter-minute-now":return Vl;case"twitter-first-minute":return Bl;default:return Nl}}function Zl(t){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rc,ic=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.polyfill;ec(this,t),"string"==typeof e&&(e=[e]),this.locale=tl(e.concat(t.getDefaultLocale()),Il),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),!1===r?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=Hu,this.IntlPluralRules=Hu.PluralRules),this.relativeTimeFormatCache=new Xu,this.pluralRulesCache=new Xu}var e,n,r;return e=t,(n=[{key:"format",value:function(t,e,n){var r,i;n||(!e||"string"==typeof(r=e)||function(t){return void 0!==Zl(t)&&null!==t&&t.constructor===ac}(i=r)&&(Array.isArray(i.steps)||Array.isArray(i.gradation)||Array.isArray(i.flavour)||"string"==typeof i.flavour||Array.isArray(i.labels)||"string"==typeof i.labels||Array.isArray(i.units)||"function"==typeof i.custom)?n={}:(n=e,e=void 0)),e||(e=El),"string"==typeof e&&(e=Xl(e));var o,a=function(t){if(t.constructor===Date||function(t){return"object"===Zl(t)&&"function"==typeof t.getTime}(t))return t.getTime();if("number"==typeof t)return t;throw new Error("Unsupported relative time formatter input: ".concat(Zl(t),", ").concat(t))}(t),s=this.getLabels(e.flavour||e.labels),u=s.labels,l=s.labelsType;void 0!==e.now&&(o=e.now),void 0===o&&void 0!==n.now&&(o=n.now),void 0===o&&(o=Date.now());var c=(o-a)/1e3,h=n.future||c<0,f=function(t,e,n,r){var i=t.now||e&&e.now;return i?"string"==typeof i?i:r?i.future:i.past:n&&n.second&&n.second.current?n.second.current:void 0}(u,Il(this.locale).now,Il(this.locale).long,h);if(e.custom){var p=e.custom({now:o,date:new Date(a),time:a,elapsed:c,locale:this.locale});if(void 0!==p)return p}var d=function(t,e,n){var r=Object.keys(e);return n&&r.push("now"),t&&(r=t.filter((function(t){return"now"===t||r.indexOf(t)>=0}))),r}(e.units,u,f),v=n.round||e.round,m=tc(ml(e.gradation||e.steps||El.steps,c,{now:o,units:d,round:v,future:h,getNextStep:!0}),3),g=m[0],y=m[1],w=m[2],b=this.formatDateForStep(a,y,c,{labels:u,labelsType:l,nowLabel:f,now:o,future:h,round:v})||"";return n.getTimeToNextUpdate?[b,bl(a,y,{nextStep:w,prevStep:g,now:o,future:h,round:v})]:b}},{key:"formatDateForStep",value:function(t,e,n,r){var i=this,o=r.labels,a=r.labelsType,s=r.nowLabel,u=r.now,l=r.future,c=r.round;if(e){if(e.format)return e.format(t,this.locale,{formatAs:function(t,e){return i.formatValue(e,t,{labels:o,future:l})},now:u,future:l});var h=e.unit||e.formatAs;if(!h)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(e)));if("now"===h)return s;var f=Math.abs(n)/ul(e);e.granularity&&(f=ll(c)(f/e.granularity)*e.granularity);var p=-1*Math.sign(n)*ll(c)(f);switch(0===p&&(p=l?0:-0),a){case"long":case"short":case"narrow":return this.getFormatter(a).format(p,h);default:return this.formatValue(p,h,{labels:o,future:l})}}}},{key:"formatValue",value:function(t,e,n){var r=n.labels,i=n.future;return this.getFormattingRule(r,e,t,{future:i}).replace("{0}",this.formatNumber(Math.abs(t)))}},{key:"getFormattingRule",value:function(t,e,n,r){var i=r.future;if(this.locale,"string"==typeof(t=t[e]))return t;var o=t[0===n?i?"future":"past":n<0?"past":"future"]||t;return"string"==typeof o?o:o[this.getPluralRules().select(Math.abs(n))]||o.other}},{key:"formatNumber",value:function(t){return this.numberFormat?this.numberFormat.format(t):String(t)}},{key:"getFormatter",value:function(t){return this.relativeTimeFormatCache.get(this.locale,t)||this.relativeTimeFormatCache.put(this.locale,t,new this.IntlRelativeTimeFormat(this.locale,{style:t}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"==typeof t&&(t=[t]),t=(t=t.map((function(t){switch(t){case"tiny":case"mini-time":return"mini";default:return t}}))).concat("long");var e=Il(this.locale),n=t,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;if(e[a])return{labelsType:a,labels:e[a]}}}}])&&nc(e.prototype,n),r&&nc(e,r),t}(),oc="en";ic.getDefaultLocale=function(){return oc},ic.setDefaultLocale=function(t){return oc=t},ic.addDefaultLocale=function(t){if(rc)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");rc=!0,ic.setDefaultLocale(t.locale),ic.addLocale(t)},ic.addLocale=function(t){kl(t),Hu.addLocale(t)},ic.locale=ic.addLocale,ic.addLabels=function(t,e,n){var r=Il(t);r||(kl({locale:t}),r=Il(t)),r[e]=n};var ac={}.constructor;var sc={locale:"en",long:{year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short:{year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow:{year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},now:{now:{current:"now",future:"in a moment",past:"just now"}},mini:{year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}}};function uc(t){f(t,"svelte-1valq38",'.svelte-1valq38.svelte-1valq38.svelte-1valq38,.svelte-1valq38.svelte-1valq38.svelte-1valq38::before,.svelte-1valq38.svelte-1valq38.svelte-1valq38::after{box-sizing:border-box}button.svelte-1valq38.svelte-1valq38.svelte-1valq38,textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button.svelte-1valq38.svelte-1valq38.svelte-1valq38{text-transform:none}button.svelte-1valq38.svelte-1valq38.svelte-1valq38,[type=\'button\'].svelte-1valq38.svelte-1valq38.svelte-1valq38{-webkit-appearance:button}.svelte-1valq38.svelte-1valq38.svelte-1valq38::-moz-focus-inner{border-style:none;padding:0}.svelte-1valq38.svelte-1valq38.svelte-1valq38:-moz-focusring{outline:1px dotted ButtonText}.svelte-1valq38.svelte-1valq38.svelte-1valq38:-moz-ui-invalid{box-shadow:none}.svelte-1valq38.svelte-1valq38.svelte-1valq38::-webkit-inner-spin-button,.svelte-1valq38.svelte-1valq38.svelte-1valq38::-webkit-outer-spin-button{height:auto}.svelte-1valq38.svelte-1valq38.svelte-1valq38::-webkit-search-decoration{-webkit-appearance:none}.svelte-1valq38.svelte-1valq38.svelte-1valq38::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h4.svelte-1valq38.svelte-1valq38.svelte-1valq38,p.svelte-1valq38.svelte-1valq38.svelte-1valq38{margin:0}button.svelte-1valq38.svelte-1valq38.svelte-1valq38{background-color:transparent;background-image:none}.svelte-1valq38.svelte-1valq38.svelte-1valq38,.svelte-1valq38.svelte-1valq38.svelte-1valq38::before,.svelte-1valq38.svelte-1valq38.svelte-1valq38::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}img.svelte-1valq38.svelte-1valq38.svelte-1valq38{border-style:solid}textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38{resize:vertical}textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38::-moz-placeholder{opacity:1;color:#9ca3af}textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38:-ms-input-placeholder{opacity:1;color:#9ca3af}textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38::placeholder{opacity:1;color:#9ca3af}button.svelte-1valq38.svelte-1valq38.svelte-1valq38{cursor:pointer}h4.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-size:inherit;font-weight:inherit}button.svelte-1valq38.svelte-1valq38.svelte-1valq38,textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38{padding:0;line-height:inherit;color:inherit}img.svelte-1valq38.svelte-1valq38.svelte-1valq38{display:block;vertical-align:middle}img.svelte-1valq38.svelte-1valq38.svelte-1valq38{max-width:100%;height:auto}.svelte-1valq38.svelte-1valq38.svelte-1valq38,.svelte-1valq38.svelte-1valq38.svelte-1valq38::before,.svelte-1valq38.svelte-1valq38.svelte-1valq38::after{--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.form-textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0px;padding-top:0.5rem;padding-right:0.75rem;padding-bottom:0.5rem;padding-left:0.75rem;font-size:1rem;line-height:1.5rem}.form-textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#2563eb;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);border-color:#2563eb}.form-textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38::-moz-placeholder{color:#6b7280;opacity:1}.form-textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38:-ms-input-placeholder{color:#6b7280;opacity:1}.form-textarea.svelte-1valq38.svelte-1valq38.svelte-1valq38::placeholder{color:#6b7280;opacity:1}.mt-3.svelte-1valq38.svelte-1valq38.svelte-1valq38{margin-top:0.75rem}.mb-2.svelte-1valq38.svelte-1valq38.svelte-1valq38{margin-bottom:0.5rem}.flex.svelte-1valq38.svelte-1valq38.svelte-1valq38{display:flex}.h-24.svelte-1valq38.svelte-1valq38.svelte-1valq38{height:6rem}.h-12.svelte-1valq38.svelte-1valq38.svelte-1valq38{height:3rem}.w-full.svelte-1valq38.svelte-1valq38.svelte-1valq38{width:100%}.w-3\\/4.svelte-1valq38.svelte-1valq38.svelte-1valq38{width:75%}.w-12.svelte-1valq38.svelte-1valq38.svelte-1valq38{width:3rem}.flex-grow.svelte-1valq38.svelte-1valq38.svelte-1valq38{flex-grow:1}.flex-col.svelte-1valq38.svelte-1valq38.svelte-1valq38{flex-direction:column}.gap-4.svelte-1valq38.svelte-1valq38.svelte-1valq38{gap:1rem}.space-y-8.svelte-1valq38>.svelte-1valq38:not([hidden])~.svelte-1valq38:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.self-end.svelte-1valq38.svelte-1valq38.svelte-1valq38{align-self:flex-end}.rounded-md.svelte-1valq38.svelte-1valq38.svelte-1valq38{border-radius:0.375rem}.rounded-full.svelte-1valq38.svelte-1valq38.svelte-1valq38{border-radius:9999px}.border-gray-400.svelte-1valq38.svelte-1valq38.svelte-1valq38{--tw-border-opacity:1;border-color:rgba(156, 163, 175, var(--tw-border-opacity))}.bg-primary-50.svelte-1valq38.svelte-1valq38.svelte-1valq38{--tw-bg-opacity:1;background-color:rgba(240, 249, 255, var(--tw-bg-opacity))}.py-1.svelte-1valq38.svelte-1valq38.svelte-1valq38{padding-top:0.25rem;padding-bottom:0.25rem}.px-4.svelte-1valq38.svelte-1valq38.svelte-1valq38{padding-left:1rem;padding-right:1rem}.px-6.svelte-1valq38.svelte-1valq38.svelte-1valq38{padding-left:1.5rem;padding-right:1.5rem}.py-2.svelte-1valq38.svelte-1valq38.svelte-1valq38{padding-top:0.5rem;padding-bottom:0.5rem}.font-sans.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}.text-2xl.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-size:1.5rem;line-height:2rem}.text-lg.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-size:1.125rem;line-height:1.75rem}.text-base.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-size:1rem;line-height:1.5rem}.text-xl.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-size:1.25rem;line-height:1.75rem}.font-medium.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-weight:500}.font-normal.svelte-1valq38.svelte-1valq38.svelte-1valq38{font-weight:400}.text-primary-800.svelte-1valq38.svelte-1valq38.svelte-1valq38{--tw-text-opacity:1;color:rgba(7, 89, 133, var(--tw-text-opacity))}.text-gray-400.svelte-1valq38.svelte-1valq38.svelte-1valq38{--tw-text-opacity:1;color:rgba(156, 163, 175, var(--tw-text-opacity))}.primary-btn.svelte-1valq38.svelte-1valq38.svelte-1valq38{border-radius:0.375rem;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#e0f2fe;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(224, 242, 254, 0));--tw-gradient-stops:var(--tw-gradient-from), #dbeafe, var(--tw-gradient-to, rgba(219, 234, 254, 0));--tw-gradient-to:#ede9fe;--tw-text-opacity:1;color:rgba(12, 74, 110, var(--tw-text-opacity))}.primary-btn.svelte-1valq38.svelte-1valq38.svelte-1valq38:hover{--tw-bg-opacity:1;background-color:rgba(224, 242, 254, var(--tw-bg-opacity));--tw-gradient-from:#bae6fd;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(186, 230, 253, 0));--tw-gradient-stops:var(--tw-gradient-from), #bfdbfe, var(--tw-gradient-to, rgba(191, 219, 254, 0));--tw-gradient-to:#ddd6fe}.primary-btn.svelte-1valq38.svelte-1valq38.svelte-1valq38:disabled{cursor:not-allowed;--tw-saturate:saturate(.5);filter:var(--tw-filter)}.primary-btn.svelte-1valq38.svelte-1valq38.svelte-1valq38:disabled:hover{--tw-gradient-from:#e0f2fe;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(224, 242, 254, 0));--tw-gradient-stops:var(--tw-gradient-from), #dbeafe, var(--tw-gradient-to, rgba(219, 234, 254, 0));--tw-gradient-to:#ede9fe}.disabled\\:cursor-not-allowed.svelte-1valq38.svelte-1valq38.svelte-1valq38:disabled{cursor:not-allowed}')}function lc(t,e,n){const r=t.slice();return r[14]=e[n],r}function cc(t){let e,n=[],r=new Map,i=t[1];const o=t=>t[14].id;for(let e=0;e<i.length;e+=1){let a=lc(t,i,e),s=o(a);r.set(s,n[e]=hc(s,a))}return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();b(e,"class","space-y-8 svelte-1valq38")},m(t,r){p(t,e,r);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,a){42&a&&(i=t[1],n=V(n,a,o,1,t,i,r,e,U,hc,null,lc))},d(t){t&&d(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function hc(t,e){let n,r,i,o,a,s,l,c,f,m,w,I,k,C,T,E,S=e[3][e[14].user].name+"",N=e[5].format(e[14].timestamp)+"",x=e[14].text+"";return{key:t,first:null,c(){n=v("div"),r=v("img"),a=y(),s=v("div"),l=v("h4"),c=g(S),f=y(),m=v("span"),w=g("commented "),I=g(N),k=y(),C=v("p"),T=g(x),E=y(),u(r.src,i=e[3][e[14].user].photo)||b(r,"src",i),b(r,"alt",o=e[3][e[14].user].name+"'s profile picture"),b(r,"class","h-12 w-12 rounded-full svelte-1valq38"),b(m,"class","text-base text-gray-400 font-normal svelte-1valq38"),b(l,"class","text-lg text-primary-800 mb-2 font-medium svelte-1valq38"),b(C,"class","text-xl svelte-1valq38"),b(s,"class","bg-primary-50 flex-grow px-6 py-2 svelte-1valq38"),b(n,"class","flex gap-4 svelte-1valq38"),this.first=n},m(t,e){p(t,n,e),h(n,r),h(n,a),h(n,s),h(s,l),h(l,c),h(l,f),h(l,m),h(m,w),h(m,I),h(s,k),h(s,C),h(C,T),h(n,E)},p(t,n){e=t,10&n&&!u(r.src,i=e[3][e[14].user].photo)&&b(r,"src",i),10&n&&o!==(o=e[3][e[14].user].name+"'s profile picture")&&b(r,"alt",o),10&n&&S!==(S=e[3][e[14].user].name+"")&&_(c,S),2&n&&N!==(N=e[5].format(e[14].timestamp)+"")&&_(I,N),2&n&&x!==(x=e[14].text+"")&&_(T,x)},d(t){t&&d(n)}}}function fc(e){let n,i,o,a,s,u,l,c,f,m,_,k=Object.keys(e[3]).length,C=k&&cc(e);return{c(){n=v("div"),i=v("textarea"),s=y(),u=v("button"),l=g("Submit"),f=y(),C&&C.c(),b(i,"class","border-gray-400 rounded-md w-full form-textarea font-sans h-24 disabled:cursor-not-allowed svelte-1valq38"),b(i,"placeholder",o=e[4].user?"Write your thoughts...":"Login to leave a comment"),i.disabled=a=!e[4].user,b(u,"type","button"),b(u,"class","self-end text-lg primary-btn px-4 py-1  svelte-1valq38"),u.disabled=c=!e[4].user||!e[2],b(n,"class","flex flex-col gap-4 text-2xl mt-3 w-3/4 svelte-1valq38")},m(t,r){p(t,n,r),h(n,i),I(i,e[2]),h(n,s),h(n,u),h(u,l),h(n,f),C&&C.m(n,null),m||(_=[w(i,"input",e[8]),w(u,"click",e[9])],m=!0)},p(t,[e]){16&e&&o!==(o=t[4].user?"Write your thoughts...":"Login to leave a comment")&&b(i,"placeholder",o),16&e&&a!==(a=!t[4].user)&&(i.disabled=a),4&e&&I(i,t[2]),20&e&&c!==(c=!t[4].user||!t[2])&&(u.disabled=c),8&e&&(k=Object.keys(t[3]).length),k?C?C.p(t,e):(C=cc(t),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:t,o:t,d(t){t&&d(n),C&&C.d(),m=!1,r(_)}}}function pc(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o())),ic.addDefaultLocale(sc);const a=new ic("en-US");console.log("comments");let s,u,c,{page:h=(window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/")}=n;try{const t=de();s=t.authStore,o(),o=l(s,(t=>r(4,i=t))),u=t.loginWithGoogle,c=t.logout}catch(t){throw t}const f=ce.database();let p=[],d="",v={};C((async()=>{r(3,v=await f.ref("users/info").once("value").then((t=>t.val()))??{})}));const m=()=>{if(!i.user||!d)return;const t=`posts/${vu(h)}/comments`,e=f.ref(t).push({user:i.user.uid,text:d,timestamp:ce.database.ServerValue.TIMESTAMP}).key;r(1,p=[{id:e,user:i.user.uid,text:d,timestamp:Date.now()},...p]),r(2,d="")};return e.$$set=t=>{"page"in t&&r(7,h=t.page)},e.$$.update=()=>{128&e.$$.dirty&&f.ref(`posts/${vu(h)}/comments`).orderByChild("timestamp").once("value").then((t=>t.val())).then((t=>{var e;e=Object.entries(t).map((([t,e])=>({id:t,...e}))).reverse(),r(1,p=e)}))},[s,p,d,v,i,a,m,h,function(){d=this.value,r(2,d)},()=>m()]}class dc extends K{constructor(t){super(),$(this,t,pc,fc,o,{page:7},uc)}}function vc(t){f(t,"svelte-2wjk5z",'.svelte-2wjk5z,.svelte-2wjk5z::before,.svelte-2wjk5z::after{box-sizing:border-box}button.svelte-2wjk5z{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button.svelte-2wjk5z{text-transform:none}button.svelte-2wjk5z,[type=\'button\'].svelte-2wjk5z{-webkit-appearance:button}.svelte-2wjk5z::-moz-focus-inner{border-style:none;padding:0}.svelte-2wjk5z:-moz-focusring{outline:1px dotted ButtonText}.svelte-2wjk5z:-moz-ui-invalid{box-shadow:none}.svelte-2wjk5z::-webkit-inner-spin-button,.svelte-2wjk5z::-webkit-outer-spin-button{height:auto}.svelte-2wjk5z::-webkit-search-decoration{-webkit-appearance:none}.svelte-2wjk5z::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h2.svelte-2wjk5z,h3.svelte-2wjk5z{margin:0}button.svelte-2wjk5z{background-color:transparent;background-image:none}.svelte-2wjk5z,.svelte-2wjk5z::before,.svelte-2wjk5z::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}button.svelte-2wjk5z{cursor:pointer}h2.svelte-2wjk5z,h3.svelte-2wjk5z{font-size:inherit;font-weight:inherit}button.svelte-2wjk5z{padding:0;line-height:inherit;color:inherit}.svelte-2wjk5z,.svelte-2wjk5z::before,.svelte-2wjk5z::after{--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}main.svelte-2wjk5z{margin:0;font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n        "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,\n        "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n        "Noto Color Emoji";line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:100%}.mx-auto.svelte-2wjk5z{margin-left:auto;margin-right:auto}.my-16.svelte-2wjk5z{margin-top:4rem;margin-bottom:4rem}.mt-4.svelte-2wjk5z{margin-top:1rem}.flex.svelte-2wjk5z{display:flex}.h-9.svelte-2wjk5z{height:2.25rem}.w-full.svelte-2wjk5z{width:100%}.flex-col.svelte-2wjk5z{flex-direction:column}.items-center.svelte-2wjk5z{align-items:center}.gap-10.svelte-2wjk5z{gap:2.5rem}.gap-2.svelte-2wjk5z{gap:0.5rem}.text-3xl.svelte-2wjk5z{font-size:1.875rem;line-height:2.25rem}.text-2xl.svelte-2wjk5z{font-size:1.5rem;line-height:2rem}.font-bold.svelte-2wjk5z{font-weight:700}.font-medium.svelte-2wjk5z{font-weight:500}.text-primary-600.svelte-2wjk5z{--tw-text-opacity:1;color:rgba(2, 132, 199, var(--tw-text-opacity))}.primary-btn.svelte-2wjk5z{border-radius:0.375rem;background-image:linear-gradient(to right, var(--tw-gradient-stops));--tw-gradient-from:#e0f2fe;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(224, 242, 254, 0));--tw-gradient-stops:var(--tw-gradient-from), #dbeafe, var(--tw-gradient-to, rgba(219, 234, 254, 0));--tw-gradient-to:#ede9fe;padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.5rem;padding-right:0.5rem;--tw-text-opacity:1;color:rgba(12, 74, 110, var(--tw-text-opacity))}.primary-btn.svelte-2wjk5z:hover{--tw-bg-opacity:1;background-color:rgba(224, 242, 254, var(--tw-bg-opacity));--tw-gradient-from:#bae6fd;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to, rgba(186, 230, 253, 0));--tw-gradient-stops:var(--tw-gradient-from), #bfdbfe, var(--tw-gradient-to, rgba(191, 219, 254, 0));--tw-gradient-to:#ddd6fe}')}function mc(e){let n;return{c(){n=v("div"),b(n,"class","h-9 svelte-2wjk5z")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}function gc(e){let n,r,o,a,s;return{c(){n=v("div"),r=v("button"),r.textContent="Login",o=g("\n      to add reactions."),b(r,"type","button"),b(r,"class","primary-btn text-md svelte-2wjk5z"),b(n,"class","svelte-2wjk5z")},m(t,u){p(t,n,u),h(n,r),h(n,o),a||(s=w(r,"click",(function(){i(e[4])&&e[4].apply(this,arguments)})),a=!0)},p(t,n){e=t},i:t,o:t,d(t){t&&d(n),a=!1,s()}}}function yc(t){let e,n,r,o,a,s,u,l,c,f,m,I,k,C=t[6].user.displayName+"";return c=new cu({}),{c(){e=v("div"),n=v("h2"),r=g("Hi "),o=v("span"),a=g(C),s=g(" !"),u=y(),l=v("button"),z(c.$$.fragment),f=g("\n        Logout"),b(o,"class","text-primary-600 svelte-2wjk5z"),b(n,"class","text-3xl font-bold svelte-2wjk5z"),b(l,"type","button"),b(l,"class","flex items-center gap-2 text-md primary-btn svelte-2wjk5z"),b(e,"class","flex gap-10 items-center svelte-2wjk5z")},m(d,v){p(d,e,v),h(e,n),h(n,r),h(n,o),h(o,a),h(n,s),h(e,u),h(e,l),W(c,l,null),h(l,f),m=!0,I||(k=w(l,"click",(function(){i(t[5])&&t[5].apply(this,arguments)})),I=!0)},p(e,n){t=e,(!m||64&n)&&C!==(C=t[6].user.displayName+"")&&_(a,C)},i(t){m||(j(c.$$.fragment,t),m=!0)},o(t){F(c.$$.fragment,t),m=!1},d(t){t&&d(e),B(c),I=!1,k()}}}function wc(t){let e,n,i,o,a,s,u,l,c,f,m;const w=[yc,gc,mc],I=[];function k(t,e){return t[6].user?0:t[6].loading?2:1}return n=k(t),i=I[n]=w[n](t),l=new _u({props:{page:t[1],reactions:t[0]}}),f=new dc({props:{page:t[1]}}),{c(){e=v("main"),i.c(),o=y(),a=v("h3"),s=g(t[2]),u=y(),z(l.$$.fragment),c=y(),z(f.$$.fragment),b(a,"class","text-2xl mt-4 font-medium svelte-2wjk5z"),b(e,"class","w-full mx-auto flex flex-col items-center my-16 svelte-2wjk5z")},m(t,r){p(t,e,r),I[n].m(e,null),h(e,o),h(e,a),h(a,s),h(e,u),W(l,e,null),h(e,c),W(f,e,null),m=!0},p(t,[a]){let u=n;n=k(t),n===u?I[n].p(t,a):(M={r:0,c:[],p:M},F(I[u],1,1,(()=>{I[u]=null})),M.r||r(M.c),M=M.p,i=I[n],i?i.p(t,a):(i=I[n]=w[n](t),i.c()),j(i,1),i.m(e,o)),(!m||4&a)&&_(s,t[2]);const c={};2&a&&(c.page=t[1]),1&a&&(c.reactions=t[0]),l.$set(c);const h={};2&a&&(h.page=t[1]),f.$set(h)},i(t){m||(j(i),j(l.$$.fragment,t),j(f.$$.fragment,t),m=!0)},o(t){F(i),F(l.$$.fragment,t),F(f.$$.fragment,t),m=!1},d(t){t&&d(e),I[n].d(),B(l),B(f)}}}function bc(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o()));let a,s,u,{firebaseConfig:c}=n,{reactions:h=["","","",""]}=n,{page:f=(window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/")}=n,{reactionText:p="Did you enjoy this post? Leave your reaction below!"}=n;if(!c)throw new Error("No firebaseConfig was provided");ce.apps.length||ce.initializeApp(c);try{const t=de();a=t.authStore,o(),o=l(a,(t=>r(6,i=t))),s=t.loginWithGoogle,u=t.logout}catch(t){throw t}return e.$$set=t=>{"firebaseConfig"in t&&r(7,c=t.firebaseConfig),"reactions"in t&&r(0,h=t.reactions),"page"in t&&r(1,f=t.page),"reactionText"in t&&r(2,p=t.reactionText)},[h,f,p,a,s,u,i,c]}class _c extends K{constructor(t){super(),$(this,t,bc,wc,o,{firebaseConfig:7,reactions:0,page:1,reactionText:2},vc)}}const Ic={install:({firebaseConfig:t,reactions:e,page:n,reactionText:r})=>{const i=document.getElementById("reactive_widget");new _c({target:i,props:{firebaseConfig:t,page:n,reactions:e,reactionText:r}})}};return Ic}));
